
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimcli open in colab badge &#8212; Python tests [PRIVATE]</title>
    <link rel="stylesheet" href="../../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/_custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Pandas Recipes" href="../Pandas/pandas recipes.html" />
    <link rel="prev" title="Tqdm and jupyter integration" href="../tqdm.html" />
   
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->


   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-149959808-1"></script>
   <!-- <script src="_static/js/custom.js"></script> -->


  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../Pandas/pandas recipes.html" title="Pandas Recipes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../tqdm.html" title="Tqdm and jupyter integration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Python tests [PRIVATE]</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Dimcli open in colab badge</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Dimcli-open-in-colab-badge">
<h1>Dimcli open in colab badge<a class="headerlink" href="#Dimcli-open-in-colab-badge" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;https://colab.research.google.com/github/digital-science/dimensions-api-lab&quot;</span> <span class="n">target</span><span class="o">=</span><span class="s2">&quot;_parent&quot;</span><span class="o">&gt;&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://colab.research.google.com/assets/colab-badge.svg&quot;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&quot;Open Dimensions API Lab In Google Colab&quot;</span><span class="o">/&gt;&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Dimcli-Install---Short-Version">
<h1>Dimcli Install - Short Version<a class="headerlink" href="#Dimcli-Install---Short-Version" title="Permalink to this headline">Â¶</a></h1>
<p>A bunch of extra libraries are also installed</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># @markdown # Get the API library and login</span>
<span class="c1"># @markdown Click the &#39;play&#39; button on the left (or shift+enter) after entering your API credentials</span>

<span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="c1">#@param {type: &quot;string&quot;}</span>
<span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="c1">#@param {type: &quot;string&quot;}</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://app.dimensions.ai&quot;</span> <span class="c1">#@param {type: &quot;string&quot;}</span>

<span class="o">!</span>pip install dimcli plotly tqdm -U --quiet

<span class="c1"># load common libraries</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="kn">import</span> <span class="n">json_normalize</span>

<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">tqdm.notebook</span> <span class="kn">import</span> <span class="n">tqdm</span> <span class="k">as</span> <span class="n">progress</span>

<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">plot</span>
<span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
  <span class="c1"># make js dependecies local / needed by html exports</span>
  <span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">init_notebook_mode</span>
  <span class="n">init_notebook_mode</span><span class="p">(</span><span class="n">connected</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">dimcli</span>
<span class="kn">from</span> <span class="nn">dimcli.shortcuts</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">)</span>
<span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Dimcli-Install---Long-Version-with-PSW-hiding">
<h1>Dimcli Install - Long Version with PSW hiding<a class="headerlink" href="#Dimcli-Install---Long-Version-with-PSW-hiding" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># @markdown # Get the API library and login</span>
<span class="c1"># @markdown **Privacy tip**: leave the password blank and you&#39;ll be asked for it later. This can be handy on shared computers.</span>
<span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1">#@param {type: &quot;string&quot;}</span>
<span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1">#@param {type: &quot;string&quot;}</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;https://app.dimensions.ai&quot;</span>  <span class="c1">#@param {type: &quot;string&quot;}</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==</span><span class="se">\n</span><span class="s2">Installing libraries..&quot;</span><span class="p">)</span>
<span class="o">!</span>pip install dimcli plotly_express -U --quiet
<span class="kn">import</span> <span class="nn">dimcli</span>
<span class="kn">from</span> <span class="nn">dimcli.shortcuts</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1">#</span>
<span class="c1"># load common libraries</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="kn">import</span> <span class="n">json_normalize</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm_notebook</span> <span class="k">as</span> <span class="n">progressbar</span>
<span class="c1">#</span>
<span class="c1"># charts lib</span>
<span class="kn">import</span> <span class="nn">plotly_express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
  <span class="c1"># make js dependecies local / needed by html exports</span>
  <span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">init_notebook_mode</span>
  <span class="n">init_notebook_mode</span><span class="p">(</span><span class="n">connected</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>



<span class="c1"># AUTHENTICATION</span>
<span class="c1"># https://github.com/digital-science/dimcli#authentication</span>
<span class="c1">#</span>
<span class="c1"># == Google Colab users ==</span>
<span class="c1"># If username/password not provided, the interactive setup assistant `dimcli --init` is invoked</span>
<span class="c1">#</span>
<span class="c1"># == Jupyter Notebook users ==</span>
<span class="c1"># If username/password not provided, try to use the global API credentials file.</span>
<span class="c1"># To create one, open a terminal (File/New/Terminal) and run `dimcli --init` from there</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==</span><span class="se">\n</span><span class="s2">Logging in..&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">username</span> <span class="ow">and</span> <span class="n">password</span><span class="p">:</span>
  <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="k">if</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Environment: Google Colab&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">username</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
      <span class="kn">import</span> <span class="nn">getpass</span>
      <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Password: &#39;</span><span class="p">)</span>
      <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;... launching interactive setup assistant&quot;</span><span class="p">)</span>
      <span class="o">!</span>dimcli --init
      <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Environment: Jupyter Notebook</span><span class="se">\n</span><span class="s2">... looking for API credentials file&quot;</span><span class="p">)</span>
    <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

<span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>



<span class="c1">#</span>
<span class="c1"># data-saving utils</span>
<span class="c1">#</span>
<span class="n">DATAFOLDER</span> <span class="o">=</span> <span class="s2">&quot;extraction1&quot;</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">DATAFOLDER</span><span class="p">):</span>
  <span class="o">!</span>mkdir <span class="nv">$DATAFOLDER</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;==</span><span class="se">\n</span><span class="s2">Created data folder:&quot;</span><span class="p">,</span> <span class="n">DATAFOLDER</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="k">def</span> <span class="nf">save_as_csv</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">save_name_without_extension</span><span class="p">):</span>
    <span class="s2">&quot;usage: `save_as_csv(dataframe, &#39;filename&#39;)`&quot;</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DATAFOLDER</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">save_name_without_extension</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;===</span><span class="se">\n</span><span class="s2">Saved: &quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DATAFOLDER</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">save_name_without_extension</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Dimcli-Install---Newest-version-with-PSW-hiding">
<h1>Dimcli Install - Newest version with PSW hiding<a class="headerlink" href="#Dimcli-Install---Newest-version-with-PSW-hiding" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># @markdown # Get the API library and login</span>
<span class="c1"># @markdown Note: on Google Colab you&#39;ll be asked to input credentials each time, so to prevent sharing them accidentally.</span>
<span class="o">!</span>pip install dimcli --quiet

<span class="kn">import</span> <span class="nn">dimcli</span>
<span class="kn">from</span> <span class="nn">dimcli.shortcuts</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="c1">#</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==</span><span class="se">\n</span><span class="s2">Logging in..&quot;</span><span class="p">)</span>
<span class="c1"># https://github.com/digital-science/dimcli#authentication</span>
<span class="n">ENDPOINT</span> <span class="o">=</span> <span class="s2">&quot;https://app.dimensions.ai&quot;</span>
<span class="k">if</span> <span class="s1">&#39;google.colab&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
  <span class="kn">import</span> <span class="nn">getpass</span>
  <span class="n">USERNAME</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Username: &#39;</span><span class="p">)</span>
  <span class="n">PASSWORD</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Password: &#39;</span><span class="p">)</span>
  <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">USERNAME</span><span class="p">,</span> <span class="n">PASSWORD</span><span class="p">,</span> <span class="n">ENDPOINT</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">USERNAME</span><span class="p">,</span> <span class="n">PASSWORD</span>  <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
  <span class="n">dimcli</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">USERNAME</span><span class="p">,</span> <span class="n">PASSWORD</span><span class="p">,</span> <span class="n">ENDPOINT</span><span class="p">)</span>
<span class="n">dsl</span> <span class="o">=</span> <span class="n">dimcli</span><span class="o">.</span><span class="n">Dsl</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Dimcli-Selector-With-Dropdowns">
<h1>Dimcli Selector With Dropdowns<a class="headerlink" href="#Dimcli-Selector-With-Dropdowns" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># tip</span>
<span class="c1"># the subjects dropdown can be generated via</span>
<span class="c1"># str([&quot;%s&quot; % s for s in  sorted(dimcli.G.categories(&#39;category_for&#39;)) if len(s.split()[0]) &gt; 2])</span>
<span class="c1">#</span>

<span class="n">start_year</span> <span class="o">=</span> <span class="mi">2015</span>  <span class="c1">#@param {type: &quot;slider&quot;, min: 1980, max: 2020}</span>
<span class="n">end_year</span> <span class="o">=</span> <span class="mi">2019</span>  <span class="c1">#@param {type: &quot;slider&quot;, min: 1980, max: 2020}</span>
<span class="n">subject1</span> <span class="o">=</span> <span class="s2">&quot;0911 Maritime Engineering&quot;</span>  <span class="c1">#@param [&#39;0101 Pure Mathematics&#39;, &#39;0102 Applied Mathematics&#39;, &#39;0103 Numerical and Computational Mathematics&#39;, &#39;0104 Statistics&#39;, &#39;0105 Mathematical Physics&#39;, &#39;0201 Astronomical and Space Sciences&#39;, &#39;0202 Atomic, Molecular, Nuclear, Particle and Plasma Physics&#39;, &#39;0203 Classical Physics&#39;, &#39;0204 Condensed Matter Physics&#39;, &#39;0205 Optical Physics&#39;, &#39;0206 Quantum Physics&#39;, &#39;0299 Other Physical Sciences&#39;, &#39;0301 Analytical Chemistry&#39;, &#39;0302 Inorganic Chemistry&#39;, &#39;0303 Macromolecular and Materials Chemistry&#39;, &#39;0304 Medicinal and Biomolecular Chemistry&#39;, &#39;0305 Organic Chemistry&#39;, &#39;0306 Physical Chemistry (incl. Structural)&#39;, &#39;0307 Theoretical and Computational Chemistry&#39;, &#39;0399 Other Chemical Sciences&#39;, &#39;0401 Atmospheric Sciences&#39;, &#39;0402 Geochemistry&#39;, &#39;0403 Geology&#39;, &#39;0404 Geophysics&#39;, &#39;0405 Oceanography&#39;, &#39;0406 Physical Geography and Environmental Geoscience&#39;, &#39;0499 Other Earth Sciences&#39;, &#39;0501 Ecological Applications&#39;, &#39;0502 Environmental Science and Management&#39;, &#39;0503 Soil Sciences&#39;, &#39;0599 Other Environmental Sciences&#39;, &#39;0601 Biochemistry and Cell Biology&#39;, &#39;0602 Ecology&#39;, &#39;0603 Evolutionary Biology&#39;, &#39;0604 Genetics&#39;, &#39;0605 Microbiology&#39;, &#39;0606 Physiology&#39;, &#39;0607 Plant Biology&#39;, &#39;0608 Zoology&#39;, &#39;0699 Other Biological Sciences&#39;, &#39;0701 Agriculture, Land and Farm Management&#39;, &#39;0702 Animal Production&#39;, &#39;0703 Crop and Pasture Production&#39;, &#39;0704 Fisheries Sciences&#39;, &#39;0705 Forestry Sciences&#39;, &#39;0706 Horticultural Production&#39;, &#39;0707 Veterinary Sciences&#39;, &#39;0799 Other Agricultural and Veterinary Sciences&#39;, &#39;0801 Artificial Intelligence and Image Processing&#39;, &#39;0802 Computation Theory and Mathematics&#39;, &#39;0803 Computer Software&#39;, &#39;0804 Data Format&#39;, &#39;0805 Distributed Computing&#39;, &#39;0806 Information Systems&#39;, &#39;0807 Library and Information Studies&#39;, &#39;0899 Other Information and Computing Sciences&#39;, &#39;0901 Aerospace Engineering&#39;, &#39;0902 Automotive Engineering&#39;, &#39;0903 Biomedical Engineering&#39;, &#39;0904 Chemical Engineering&#39;, &#39;0905 Civil Engineering&#39;, &#39;0906 Electrical and Electronic Engineering&#39;, &#39;0907 Environmental Engineering&#39;, &#39;0908 Food Sciences&#39;, &#39;0909 Geomatic Engineering&#39;, &#39;0910 Manufacturing Engineering&#39;, &#39;0911 Maritime Engineering&#39;, &#39;0912 Materials Engineering&#39;, &#39;0913 Mechanical Engineering&#39;, &#39;0914 Resources Engineering and Extractive Metallurgy&#39;, &#39;0915 Interdisciplinary Engineering&#39;, &#39;0999 Other Engineering&#39;, &#39;1001 Agricultural Biotechnology&#39;, &#39;1002 Environmental Biotechnology&#39;, &#39;1003 Industrial Biotechnology&#39;, &#39;1004 Medical Biotechnology&#39;, &#39;1005 Communications Technologies&#39;, &#39;1006 Computer Hardware&#39;, &#39;1007 Nanotechnology&#39;, &#39;1099 Other Technology&#39;, &#39;1101 Medical Biochemistry and Metabolomics&#39;, &#39;1102 Cardiorespiratory Medicine and Haematology&#39;, &#39;1103 Clinical Sciences&#39;, &#39;1104 Complementary and Alternative Medicine&#39;, &#39;1105 Dentistry&#39;, &#39;1106 Human Movement and Sports Science&#39;, &#39;1107 Immunology&#39;, &#39;1108 Medical Microbiology&#39;, &#39;1109 Neurosciences&#39;, &#39;1110 Nursing&#39;, &#39;1111 Nutrition and Dietetics&#39;, &#39;1112 Oncology and Carcinogenesis&#39;, &#39;1113 Ophthalmology and Optometry&#39;, &#39;1114 Paediatrics and Reproductive Medicine&#39;, &#39;1115 Pharmacology and Pharmaceutical Sciences&#39;, &#39;1116 Medical Physiology&#39;, &#39;1117 Public Health and Health Services&#39;, &#39;1199 Other Medical and Health Sciences&#39;, &#39;1201 Architecture&#39;, &#39;1202 Building&#39;, &#39;1203 Design Practice and Management&#39;, &#39;1205 Urban and Regional Planning&#39;, &#39;1299 Other Built Environment and Design&#39;, &#39;1301 Education Systems&#39;, &#39;1302 Curriculum and Pedagogy&#39;, &#39;1303 Specialist Studies In Education&#39;, &#39;1399 Other Education&#39;, &#39;1401 Economic Theory&#39;, &#39;1402 Applied Economics&#39;, &#39;1403 Econometrics&#39;, &#39;1499 Other Economics&#39;, &#39;1501 Accounting, Auditing and Accountability&#39;, &#39;1502 Banking, Finance and Investment&#39;, &#39;1503 Business and Management&#39;, &#39;1504 Commercial Services&#39;, &#39;1505 Marketing&#39;, &#39;1506 Tourism&#39;, &#39;1507 Transportation and Freight Services&#39;, &#39;1601 Anthropology&#39;, &#39;1602 Criminology&#39;, &#39;1603 Demography&#39;, &#39;1604 Human Geography&#39;, &#39;1605 Policy and Administration&#39;, &#39;1606 Political Science&#39;, &#39;1607 Social Work&#39;, &#39;1608 Sociology&#39;, &#39;1699 Other Studies In Human Society&#39;, &#39;1701 Psychology&#39;, &#39;1702 Cognitive Sciences&#39;, &#39;1799 Other Psychology and Cognitive Sciences&#39;, &#39;1801 Law&#39;, &#39;1899 Other Law and Legal Studies&#39;, &#39;1901 Art Theory and Criticism&#39;, &#39;1902 Film, Television and Digital Media&#39;, &#39;1903 Journalism and Professional Writing&#39;, &#39;1904 Performing Arts and Creative Writing&#39;, &#39;1905 Visual Arts and Crafts&#39;, &#39;1999 Other Studies In Creative Arts and Writing&#39;, &#39;2001 Communication and Media Studies&#39;, &#39;2002 Cultural Studies&#39;, &#39;2003 Language Studies&#39;, &#39;2004 Linguistics&#39;, &#39;2005 Literary Studies&#39;, &#39;2099 Other Language, Communication and Culture&#39;, &#39;2101 Archaeology&#39;, &#39;2102 Curatorial and Related Studies&#39;, &#39;2103 Historical Studies&#39;, &#39;2199 Other History and Archaeology&#39;, &#39;2201 Applied Ethics&#39;, &#39;2202 History and Philosophy of Specific Fields&#39;, &#39;2203 Philosophy&#39;, &#39;2204 Religion and Religious Studies&#39;, &#39;2299 Other Philosophy and Religious Studies&#39;]</span>
<span class="n">subject2</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span>  <span class="c1">#@param [&#39;None&#39;, &#39;0101 Pure Mathematics&#39;, &#39;0102 Applied Mathematics&#39;, &#39;0103 Numerical and Computational Mathematics&#39;, &#39;0104 Statistics&#39;, &#39;0105 Mathematical Physics&#39;, &#39;0201 Astronomical and Space Sciences&#39;, &#39;0202 Atomic, Molecular, Nuclear, Particle and Plasma Physics&#39;, &#39;0203 Classical Physics&#39;, &#39;0204 Condensed Matter Physics&#39;, &#39;0205 Optical Physics&#39;, &#39;0206 Quantum Physics&#39;, &#39;0299 Other Physical Sciences&#39;, &#39;0301 Analytical Chemistry&#39;, &#39;0302 Inorganic Chemistry&#39;, &#39;0303 Macromolecular and Materials Chemistry&#39;, &#39;0304 Medicinal and Biomolecular Chemistry&#39;, &#39;0305 Organic Chemistry&#39;, &#39;0306 Physical Chemistry (incl. Structural)&#39;, &#39;0307 Theoretical and Computational Chemistry&#39;, &#39;0399 Other Chemical Sciences&#39;, &#39;0401 Atmospheric Sciences&#39;, &#39;0402 Geochemistry&#39;, &#39;0403 Geology&#39;, &#39;0404 Geophysics&#39;, &#39;0405 Oceanography&#39;, &#39;0406 Physical Geography and Environmental Geoscience&#39;, &#39;0499 Other Earth Sciences&#39;, &#39;0501 Ecological Applications&#39;, &#39;0502 Environmental Science and Management&#39;, &#39;0503 Soil Sciences&#39;, &#39;0599 Other Environmental Sciences&#39;, &#39;0601 Biochemistry and Cell Biology&#39;, &#39;0602 Ecology&#39;, &#39;0603 Evolutionary Biology&#39;, &#39;0604 Genetics&#39;, &#39;0605 Microbiology&#39;, &#39;0606 Physiology&#39;, &#39;0607 Plant Biology&#39;, &#39;0608 Zoology&#39;, &#39;0699 Other Biological Sciences&#39;, &#39;0701 Agriculture, Land and Farm Management&#39;, &#39;0702 Animal Production&#39;, &#39;0703 Crop and Pasture Production&#39;, &#39;0704 Fisheries Sciences&#39;, &#39;0705 Forestry Sciences&#39;, &#39;0706 Horticultural Production&#39;, &#39;0707 Veterinary Sciences&#39;, &#39;0799 Other Agricultural and Veterinary Sciences&#39;, &#39;0801 Artificial Intelligence and Image Processing&#39;, &#39;0802 Computation Theory and Mathematics&#39;, &#39;0803 Computer Software&#39;, &#39;0804 Data Format&#39;, &#39;0805 Distributed Computing&#39;, &#39;0806 Information Systems&#39;, &#39;0807 Library and Information Studies&#39;, &#39;0899 Other Information and Computing Sciences&#39;, &#39;0901 Aerospace Engineering&#39;, &#39;0902 Automotive Engineering&#39;, &#39;0903 Biomedical Engineering&#39;, &#39;0904 Chemical Engineering&#39;, &#39;0905 Civil Engineering&#39;, &#39;0906 Electrical and Electronic Engineering&#39;, &#39;0907 Environmental Engineering&#39;, &#39;0908 Food Sciences&#39;, &#39;0909 Geomatic Engineering&#39;, &#39;0910 Manufacturing Engineering&#39;, &#39;0911 Maritime Engineering&#39;, &#39;0912 Materials Engineering&#39;, &#39;0913 Mechanical Engineering&#39;, &#39;0914 Resources Engineering and Extractive Metallurgy&#39;, &#39;0915 Interdisciplinary Engineering&#39;, &#39;0999 Other Engineering&#39;, &#39;1001 Agricultural Biotechnology&#39;, &#39;1002 Environmental Biotechnology&#39;, &#39;1003 Industrial Biotechnology&#39;, &#39;1004 Medical Biotechnology&#39;, &#39;1005 Communications Technologies&#39;, &#39;1006 Computer Hardware&#39;, &#39;1007 Nanotechnology&#39;, &#39;1099 Other Technology&#39;, &#39;1101 Medical Biochemistry and Metabolomics&#39;, &#39;1102 Cardiorespiratory Medicine and Haematology&#39;, &#39;1103 Clinical Sciences&#39;, &#39;1104 Complementary and Alternative Medicine&#39;, &#39;1105 Dentistry&#39;, &#39;1106 Human Movement and Sports Science&#39;, &#39;1107 Immunology&#39;, &#39;1108 Medical Microbiology&#39;, &#39;1109 Neurosciences&#39;, &#39;1110 Nursing&#39;, &#39;1111 Nutrition and Dietetics&#39;, &#39;1112 Oncology and Carcinogenesis&#39;, &#39;1113 Ophthalmology and Optometry&#39;, &#39;1114 Paediatrics and Reproductive Medicine&#39;, &#39;1115 Pharmacology and Pharmaceutical Sciences&#39;, &#39;1116 Medical Physiology&#39;, &#39;1117 Public Health and Health Services&#39;, &#39;1199 Other Medical and Health Sciences&#39;, &#39;1201 Architecture&#39;, &#39;1202 Building&#39;, &#39;1203 Design Practice and Management&#39;, &#39;1205 Urban and Regional Planning&#39;, &#39;1299 Other Built Environment and Design&#39;, &#39;1301 Education Systems&#39;, &#39;1302 Curriculum and Pedagogy&#39;, &#39;1303 Specialist Studies In Education&#39;, &#39;1399 Other Education&#39;, &#39;1401 Economic Theory&#39;, &#39;1402 Applied Economics&#39;, &#39;1403 Econometrics&#39;, &#39;1499 Other Economics&#39;, &#39;1501 Accounting, Auditing and Accountability&#39;, &#39;1502 Banking, Finance and Investment&#39;, &#39;1503 Business and Management&#39;, &#39;1504 Commercial Services&#39;, &#39;1505 Marketing&#39;, &#39;1506 Tourism&#39;, &#39;1507 Transportation and Freight Services&#39;, &#39;1601 Anthropology&#39;, &#39;1602 Criminology&#39;, &#39;1603 Demography&#39;, &#39;1604 Human Geography&#39;, &#39;1605 Policy and Administration&#39;, &#39;1606 Political Science&#39;, &#39;1607 Social Work&#39;, &#39;1608 Sociology&#39;, &#39;1699 Other Studies In Human Society&#39;, &#39;1701 Psychology&#39;, &#39;1702 Cognitive Sciences&#39;, &#39;1799 Other Psychology and Cognitive Sciences&#39;, &#39;1801 Law&#39;, &#39;1899 Other Law and Legal Studies&#39;, &#39;1901 Art Theory and Criticism&#39;, &#39;1902 Film, Television and Digital Media&#39;, &#39;1903 Journalism and Professional Writing&#39;, &#39;1904 Performing Arts and Creative Writing&#39;, &#39;1905 Visual Arts and Crafts&#39;, &#39;1999 Other Studies In Creative Arts and Writing&#39;, &#39;2001 Communication and Media Studies&#39;, &#39;2002 Cultural Studies&#39;, &#39;2003 Language Studies&#39;, &#39;2004 Linguistics&#39;, &#39;2005 Literary Studies&#39;, &#39;2099 Other Language, Communication and Culture&#39;, &#39;2101 Archaeology&#39;, &#39;2102 Curatorial and Related Studies&#39;, &#39;2103 Historical Studies&#39;, &#39;2199 Other History and Archaeology&#39;, &#39;2201 Applied Ethics&#39;, &#39;2202 History and Philosophy of Specific Fields&#39;, &#39;2203 Philosophy&#39;, &#39;2204 Religion and Religious Studies&#39;, &#39;2299 Other Philosophy and Religious Studies&#39;]</span>
<span class="n">connector</span> <span class="o">=</span> <span class="s2">&quot;or&quot;</span>  <span class="c1">#@param [&#39;or&#39;, &#39;and&#39;]</span>
<span class="c1">#</span>
<span class="c1">#</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Dimcli-looped-query-using-chunks">
<h1>Dimcli looped query using <code class="docutils literal notranslate"><span class="pre">chunks</span></code><a class="headerlink" href="#Dimcli-looped-query-using-chunks" title="Permalink to this headline">Â¶</a></h1>
<p>For example, if we are extracting several researchers infos based on a long list of IDs</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">dimcli.shortcuts</span> <span class="kn">import</span> <span class="n">chunks_of</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm_notebook</span> <span class="k">as</span> <span class="n">pbar</span>

<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;search researchers where id in </span><span class="si">{}</span><span class="s2"> return researchers[id+last_grant_year+total_grants] limit 1000&quot;&quot;&quot;</span>

<span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ur.011177563061.78&quot;</span><span class="p">,</span> <span class="s2">&quot;ur.011177563061.55&quot;</span><span class="p">,</span> <span class="s2">&quot;ur.011177563061.10&quot;</span><span class="p">]</span> <span class="c1"># etc..</span>

<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">pbar</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chunks_of</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ids</span><span class="p">),</span> <span class="mi">400</span><span class="p">))):</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">chunk</span><span class="p">)))</span>
    <span class="n">results</span> <span class="o">+=</span> <span class="n">q</span><span class="o">.</span><span class="n">researchers</span>

<span class="c1"># save to a dataframe for further analysis..</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Dimcli-nested-looped-query-with-chunks">
<h1>Dimcli nested looped query with <code class="docutils literal notranslate"><span class="pre">chunks</span></code><a class="headerlink" href="#Dimcli-nested-looped-query-with-chunks" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">dimcli.shortcuts</span> <span class="kn">import</span> <span class="n">chunks_of</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm_notebook</span> <span class="k">as</span> <span class="n">pbar</span>

<span class="n">queries</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Publications&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;&quot;search publications where research_orgs in </span><span class="si">{}</span><span class="s2"> return publications limit 1&quot;&quot;&quot;</span> <span class="p">,</span>
    <span class="s2">&quot;Grants&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;&quot;search grants where research_orgs in </span><span class="si">{}</span><span class="s2"> return grants limit 1&quot;&quot;&quot;</span> <span class="p">,</span>
    <span class="s2">&quot;Clinical Trials&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;&quot;search clinical_trials where organizations in </span><span class="si">{}</span><span class="s2"> return clinical_trials limit 1&quot;&quot;&quot;</span> <span class="p">,</span>
    <span class="s2">&quot;Patents&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;&quot;search patents where assignees in </span><span class="si">{}</span><span class="s2"> return patents limit 1&quot;&quot;&quot;</span> <span class="p">,</span>
    <span class="s2">&quot;Policy Documents&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;&quot;search policy_documents where publisher_org in </span><span class="si">{}</span><span class="s2"> return policy_documents limit 1&quot;&quot;&quot;</span> <span class="p">,</span>
    <span class="s2">&quot;Altmetric&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;&quot;search publications where research_orgs in </span><span class="si">{}</span><span class="s2"> and altmetric &gt; 0 return publications limit 1&quot;&quot;&quot;</span> <span class="p">,</span>
<span class="p">}</span>

<span class="n">gridids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;grid.461628.f&#39;</span><span class="p">,</span> <span class="s1">&#39;grid.418010.c&#39;</span><span class="p">,</span> <span class="s1">&#39;grid.461634.2&#39;</span><span class="p">]</span> <span class="c1"># and more...</span>
<span class="c1">#</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1">#</span>
<span class="n">loop1</span> <span class="o">=</span> <span class="n">pbar</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">queries</span><span class="p">))</span>
<span class="c1">#</span>
<span class="k">for</span> <span class="n">doctype</span> <span class="ow">in</span> <span class="n">loop1</span><span class="p">:</span>
  <span class="n">loop1</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="s2">&quot;Processing </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">doctype</span><span class="p">)</span>
  <span class="c1">#</span>
  <span class="n">loop2</span> <span class="o">=</span> <span class="n">pbar</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">chunks_of</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">gridids</span><span class="p">),</span> <span class="mi">20</span><span class="p">)))</span>
  <span class="c1">#</span>
  <span class="n">tot</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">loop2</span><span class="p">:</span>
    <span class="n">loop2</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="s2">&quot;Processing Grid IDs..&quot;</span><span class="p">)</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">queries</span><span class="p">[</span><span class="n">doctype</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">chunk</span><span class="p">))</span>
    <span class="c1">#</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="n">tot</span> <span class="o">+=</span> <span class="n">data</span><span class="o">.</span><span class="n">count_total</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;doctype&#39;</span><span class="p">:</span> <span class="n">doctype</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span> <span class="p">:</span> <span class="n">tot</span><span class="p">})</span>


<span class="c1"># save to a dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Print-libraries-versions">
<h1>Print libraries versions<a class="headerlink" href="#Print-libraries-versions" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># print versions of libraries</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Libraries versions:</span><span class="se">\n</span><span class="s2">---&quot;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">pkg_resources</span>
<span class="k">for</span> <span class="n">lib</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;pandas&quot;</span><span class="p">,</span> <span class="s2">&quot;plotly&quot;</span><span class="p">,</span> <span class="s2">&quot;dimcli&quot;</span><span class="p">,</span> <span class="s2">&quot;tqdm&quot;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&gt;&quot;</span><span class="p">,</span> <span class="n">lib</span><span class="p">,</span> <span class="s2">&quot;: &quot;</span><span class="p">,</span> <span class="n">pkg_resources</span><span class="o">.</span><span class="n">get_distribution</span><span class="p">(</span><span class="n">lib</span><span class="p">)</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Libraries versions:
---
=&gt; pandas :  1.0.3
=&gt; plotly :  4.6.0
=&gt; dimcli :  0.6.7.2
=&gt; tqdm :  4.43.0
</pre></div></div>
</div>
</div>
<div class="section" id="Plotly-chart-with-basic-stats-about-publication-authors-or-affiliations">
<h1>Plotly chart with basic stats about publication authors or affiliations<a class="headerlink" href="#Plotly-chart-with-basic-stats-about-publication-authors-or-affiliations" title="Permalink to this headline">Â¶</a></h1>
<p>Extract all authors from a list of publications and obtain basic stats about them.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">dimcli</span> <span class="kn">import</span> <span class="n">dslquery</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="n">authors</span> <span class="o">=</span> <span class="n">dslquery</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;bmw&quot; return publications limit 1000&quot;&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_dataframe_authors</span><span class="p">()</span>
<span class="n">researchers</span> <span class="o">=</span> <span class="n">authors</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;researcher_id!=&#39;&#39;&quot;</span><span class="p">)</span>
<span class="c1"># build df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;measure&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Authors in total (non unique)&#39;</span><span class="p">,</span> <span class="s1">&#39;Authors with a researcher ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Authors with a researcher ID (unique)&#39;</span><span class="p">],</span>
    <span class="s1">&#39;count&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">authors</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">researchers</span><span class="p">),</span> <span class="n">researchers</span><span class="p">[</span><span class="s1">&#39;researcher_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()],</span>
<span class="p">})</span>
<span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;measure&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Author stats for </span><span class="si">{</span><span class="n">journal_title</span><span class="si">}</span><span class="s2"> (from </span><span class="si">{</span><span class="n">start_year</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>


<span class="c1">#</span>
<span class="c1"># for affiliations</span>
<span class="c1">#</span>
<span class="n">affiliations</span> <span class="o">=</span> <span class="n">dslquery</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;bmw&quot; return publications limit 1000&quot;&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_dataframe_authors_affiliations</span><span class="p">()</span>
<span class="n">gridaffiliations</span> <span class="o">=</span> <span class="n">affiliations</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;aff_id != &#39;&#39;&quot;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;measure&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Affiliations in total (non unique)&#39;</span><span class="p">,</span> <span class="s1">&#39;Affiliations with a GRID ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Affiliations with a GRID ID (unique)&#39;</span><span class="p">],</span>
    <span class="s1">&#39;count&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">affiliations</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">gridaffiliations</span><span class="p">),</span> <span class="n">gridaffiliations</span><span class="p">[</span><span class="s1">&#39;aff_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()],</span>
<span class="p">})</span>
<span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;measure&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Affiliations stats for </span><span class="si">{</span><span class="n">journal_title</span><span class="si">}</span><span class="s2"> (from </span><span class="si">{</span><span class="n">start_year</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Dimcli-chart-with-basic-stats-about-publication-affiliations">
<h1>Dimcli chart with basic stats about publication affiliations<a class="headerlink" href="#Dimcli-chart-with-basic-stats-about-publication-affiliations" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">affiliations</span> <span class="o">=</span> <span class="n">dsl</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;search publications for &quot;bmw&quot; return publications limit 1000&quot;&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_dataframe_authors_affiliations</span><span class="p">()</span>

<span class="n">gridaffiliations</span> <span class="o">=</span> <span class="n">affiliations</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;aff_id != &#39;&#39;&quot;</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;measure&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Affiliations in total (non unique)&#39;</span><span class="p">,</span> <span class="s1">&#39;Affiliations with a GRID ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Affiliations with a GRID ID (unique)&#39;</span><span class="p">],</span>
    <span class="s1">&#39;count&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">affiliations</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">gridaffiliations</span><span class="p">),</span> <span class="n">gridaffiliations</span><span class="p">[</span><span class="s1">&#39;aff_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()],</span>
<span class="p">})</span>
<span class="c1"># requires plotly_express library</span>
<span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;measure&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Affiliations stats for </span><span class="si">{</span><span class="n">journal_title</span><span class="si">}</span><span class="s2"> (from </span><span class="si">{</span><span class="n">start_year</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Plotly-quick-chart">
<h1>Plotly quick chart<a class="headerlink" href="#Plotly-quick-chart" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">!</span>pip install plotly --quiet
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="c1"># bar chart</span>
<span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;funding&quot;</span><span class="p">,</span> <span class="n">hover_name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;country_name&quot;</span><span class="p">)</span>

<span class="c1"># scatter plot</span>
<span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;times_cited&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;type&quot;</span><span class="p">,</span>
           <span class="n">hover_name</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">,</span>
           <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;doi&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;times_cited&#39;</span><span class="p">,</span> <span class="s1">&#39;journal.title&#39;</span><span class="p">],</span>
           <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Publications most cited by year of publication&quot;</span><span class="p">)</span>

<span class="c1"># with marginal data</span>
<span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;times_cited&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
           <span class="n">hover_name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">hover_data</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;times_cited&#39;</span><span class="p">],</span>
           <span class="n">marginal_x</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span><span class="p">,</span> <span class="n">marginal_y</span><span class="o">=</span><span class="s2">&quot;histogram&quot;</span><span class="p">,</span>
           <span class="n">height</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Research Areas VS Citations (marginal subplots = X/Y distribution)&quot;</span><span class="p">)</span>

<span class="c1"># sort data by tot count</span>
<span class="n">px</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">affiliations</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;aff_name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">categoryorder</span><span class="o">=</span><span class="s2">&quot;total descending&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Plotly-Export-to-a-file">
<h1>Plotly Export to a file<a class="headerlink" href="#Plotly-Export-to-a-file" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># https://community.plot.ly/t/plotly-express-plots-automatically-open-new-tabs-when-using-plotly-offline/24862</span>

<span class="c1"># note: for image export you need extra libraries https://plot.ly/python/static-image-export/</span>


<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">plot</span>

<span class="n">iris</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">iris</span><span class="p">()</span>
<span class="n">scatter_plot</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">)</span>

<span class="n">plot</span><span class="p">(</span><span class="n">scatter_plot</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;filename.html&#39;</span><span class="p">,</span> <span class="n">auto_open</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;temp-plot.html&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="Plotly-Create-Multiple-Charts-at-the-same-time">
<h1>Plotly Create Multiple Charts at the same time<a class="headerlink" href="#Plotly-Create-Multiple-Charts-at-the-same-time" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># https://plot.ly/python/creating-and-updating-figures/</span>
<span class="c1"># https://plot.ly/python/renderers/</span>

<span class="n">fig1</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;petal_width&quot;</span><span class="p">)</span>
<span class="n">fig2</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="n">facet_col</span><span class="o">=</span><span class="s2">&quot;species&quot;</span><span class="p">)</span>

<span class="n">fig1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">fig2</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Plotly-fill-in-missing-years-with-pandas">
<h1>Plotly fill in missing years with pandas<a class="headerlink" href="#Plotly-fill-in-missing-years-with-pandas" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">yrange</span> <span class="o">=</span> <span class="p">[</span><span class="n">dfbyjournal</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">dfbyjournal</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span>
<span class="n">all_years</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">yrange</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">yrange</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>  <span class="c1"># add one to make sure max value is included</span>

<span class="k">def</span> <span class="nf">add_missing_years_per_journal</span><span class="p">(</span><span class="n">ajournal</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">dfbyjournal</span>
    <span class="c1"># list of years that already have values</span>
    <span class="n">known_years</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dfbyjournal</span><span class="p">[</span><span class="n">dfbyjournal</span><span class="p">[</span><span class="s2">&quot;journal.title&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">ajournal</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">])</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">all_years</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">known_years</span><span class="p">:</span>
            <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;journal.title&#39;</span> <span class="p">:</span> <span class="n">ajournal</span> <span class="p">,</span> <span class="s1">&#39;year&#39;</span> <span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;times_cited&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;totdois&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;totcitations&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
    <span class="c1"># note about pandas append: appending a full list once per journal is much faster!</span>
    <span class="n">dfbyjournal</span> <span class="o">=</span> <span class="n">dfbyjournal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>


<span class="c1"># now call the routine for all journals</span>
<span class="c1">#</span>
<span class="n">journals</span> <span class="o">=</span> <span class="n">dfbyjournal</span><span class="p">[</span><span class="s1">&#39;journal.title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">journals</span><span class="p">:</span>
    <span class="n">add_missing_years_per_journal</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Zip-file-archive-and-download-from-Colab">
<h1>Zip file archive and download from Colab<a class="headerlink" href="#Zip-file-archive-and-download-from-Colab" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>

<span></span><span class="c1"># zip up all files to make download easier</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">zipdir</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">ziph</span><span class="p">):</span>
    <span class="c1"># ziph is zipfile handle</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">ziph</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>

<span class="n">zipf</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="s1">&#39;output.zip&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZIP_DEFLATED</span><span class="p">)</span>
<span class="n">zipdir</span><span class="p">(</span><span class="s1">&#39;out/&#39;</span><span class="p">,</span> <span class="n">zipf</span><span class="p">)</span>
<span class="n">zipf</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="c1"># try to download from colab: sometimes it fails hence print a message</span>
<span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">files</span>

<span class="k">try</span><span class="p">:</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
  <span class="n">files</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;output.zip&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Google Colab couldn&#39;t download - please try again.&quot;</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Create-Dataframe">
<h1>Pandas Create Dataframe<a class="headerlink" href="#Pandas-Create-Dataframe" title="Permalink to this headline">Â¶</a></h1>
<p>Reminder about <a class="reference external" href="http://www.jeannicholashould.com/tidy-data-in-python.html">tidy data</a></p>
<ul class="simple">
<li><p>Each variable forms a column and contains values</p></li>
<li><p>Each observation forms a row</p></li>
<li><p>Each type of observational unit forms a table</p></li>
</ul>
<p>A few definitions:</p>
<ul class="simple">
<li><p>Variable: A measurement or an attribute. Height, weight, sex, etc.</p></li>
<li><p>Value: The actual measurement or attribute. 152 cm, 80 kg, female, etc.</p></li>
<li><p>Observation: All values measure on the same unit. Each person.</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># With empty columns</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;D&#39;</span><span class="p">,</span><span class="s1">&#39;E&#39;</span><span class="p">,</span><span class="s1">&#39;F&#39;</span><span class="p">,</span><span class="s1">&#39;G&#39;</span><span class="p">])</span>

<span class="c1"># by columns</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;val1&#39;</span><span class="p">,</span> <span class="s1">&#39;val2&#39;</span><span class="p">,</span> <span class="s1">&#39;etc..&#39;</span><span class="p">],</span>
    <span class="s1">&#39;category&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;val1&#39;</span><span class="p">,</span> <span class="s1">&#39;val2&#39;</span><span class="p">,</span> <span class="s1">&#39;etc..&#39;</span><span class="p">],</span>
<span class="p">})</span>

<span class="c1"># by rows (records)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">([</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;val1&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span> <span class="p">:</span> <span class="s1">&#39;val1&#39;</span> <span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;val1&#39;</span><span class="p">,</span> <span class="s1">&#39;category&#39;</span> <span class="p">:</span> <span class="s1">&#39;val1&#39;</span> <span class="p">},</span>
    <span class="o">...</span>
<span class="p">})</span>

<span class="c1"># from a simple dict</span>
<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">values</span><span class="p">())}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>



<span class="c1"># from JSON</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;file.json&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span> <span class="c1"># for rows, use &#39;records&#39;</span>
<span class="n">pd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;out.json&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>

<span class="c1"># from CSV</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;/tmp/tmp07wuam09/data/cereal.csv&quot;</span><span class="p">)</span>

<span class="c1"># create DF from Series</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">pubs_citing</span><span class="p">[</span><span class="s1">&#39;journal.title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">counts</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="c1"># reset index can mess up column names</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;list&#39;</span><span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;index&#39;</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Describe-and-Count-Values">
<h1>Pandas Describe and Count Values<a class="headerlink" href="#Pandas-Describe-and-Count-Values" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Return a tuple representing the dimensionality of the DataFrame.</span>
<span class="n">df</span><span class="o">.</span><span class="n">shape</span>

<span class="c1"># Return an int representing the number of axes / array dimensions.</span>
<span class="n">df</span><span class="o">.</span><span class="n">ndim</span>

<span class="c1"># This returns a Series with the data type of each column.</span>
<span class="c1"># The resultâs index is the original DataFrameâs columns. Columns with mixed types are stored with the object dtype.</span>
<span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>

<span class="c1"># the &#39;describe&#39; method returns basic statistic for all columns of a dataframe</span>
<span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

<span class="c1"># Count distict values, use nunique:</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;hID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>

<span class="c1"># Count only non-null values, use count:</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;hID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

<span class="c1"># Count total values including null values, use size attribute:</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;hID&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">size</span>

<span class="c1"># this will show you the distinct element and their number of occurence.</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;race&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="c1"># only top ten</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;race&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">10</span><span class="p">]</span>
<span class="c1"># max value</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;race&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
<span class="c1"># get he values not the counts</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;race&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>


<span class="c1"># count missing values</span>
<span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># Frequency count based on two columns (variables)</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;Group&quot;</span><span class="p">,</span> <span class="s2">&quot;Size&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;Group&quot;</span><span class="p">,</span> <span class="s2">&quot;Size&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Freq&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-get-Dataframe-Cell-Values">
<h1>Pandas get Dataframe Cell Values<a class="headerlink" href="#Pandas-get-Dataframe-Cell-Values" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">))</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">16</span><span class="p">]:</span> <span class="n">df</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">16</span><span class="p">]:</span>
          <span class="n">A</span>         <span class="n">B</span>         <span class="n">C</span>
<span class="mi">0</span> <span class="o">-</span><span class="mf">0.074172</span> <span class="o">-</span><span class="mf">0.090626</span>  <span class="mf">0.038272</span>
<span class="mi">1</span> <span class="o">-</span><span class="mf">0.128545</span>  <span class="mf">0.762088</span> <span class="o">-</span><span class="mf">0.714816</span>
<span class="mi">2</span>  <span class="mf">0.201498</span> <span class="o">-</span><span class="mf">0.734963</span>  <span class="mf">0.558397</span>
<span class="mi">3</span>  <span class="mf">1.563307</span> <span class="o">-</span><span class="mf">1.186415</span>  <span class="mf">0.848246</span>
<span class="mi">4</span>  <span class="mf">0.205171</span>  <span class="mf">0.962514</span>  <span class="mf">0.037709</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">17</span><span class="p">]:</span> <span class="o">-</span><span class="mf">0.074171888537611502</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">18</span><span class="p">]:</span> <span class="o">-</span><span class="mf">0.074171888537611502</span>

<span class="c1"># OR</span>

<span class="n">val</span> <span class="o">=</span> <span class="n">d2</span><span class="p">[</span><span class="s1">&#39;col_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Select-and-Rename-Dataframe">
<h1>Pandas Select and Rename Dataframe<a class="headerlink" href="#Pandas-Select-and-Rename-Dataframe" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># select by position</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="c1"># label based indexing</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;index_label_1&#39;</span><span class="p">]</span>

<span class="c1"># Select rows based on cell values and update</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;journal&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="s2">&quot;journal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>

<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>

<span class="c1"># Rename columns using a dictionary to map values</span>
<span class="c1"># Rename the Area columnn to &#39;place_name&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Area&quot;</span><span class="p">:</span> <span class="s2">&quot;place_name&quot;</span><span class="p">})</span>

<span class="c1"># Again, the inplace parameter will change the dataframe without assignment</span>
<span class="n">data</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Area&quot;</span><span class="p">:</span> <span class="s2">&quot;place_name&quot;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Rename multiple columns in one go with a larger dictionary</span>
<span class="n">data</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;Area&quot;</span><span class="p">:</span> <span class="s2">&quot;place_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Y2001&quot;</span><span class="p">:</span> <span class="s2">&quot;year_2001&quot;</span>
    <span class="p">},</span>
    <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Rename all columns using a function, e.g. convert all column names to lower case:</span>
<span class="n">data</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Subset-Dataframe-via-Slicing-or-Query">
<h1>Pandas Subset Dataframe via Slicing or Query<a class="headerlink" href="#Pandas-Subset-Dataframe-via-Slicing-or-Query" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Create a new DF by selecting columns</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;issue&#39;</span><span class="p">,</span> <span class="s1">&#39;pages&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;volume&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">]]</span>


<span class="c1"># from list</span>
 <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">])]</span>
<span class="c1"># negative version</span>
<span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">])]</span>

<span class="c1"># with query</span>
<span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39; column_a == [&quot;val1&quot;, &quot;val2&quot;, ...]&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;type==&#39;article&#39;&quot;</span><span class="p">)</span>
<span class="c1"># query with variable</span>
<span class="n">my_symbol</span> <span class="o">=</span> <span class="s1">&#39;BUD US&#39;</span>
<span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;Symbol==&#39;</span><span class="si">{0}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">my_symbol</span><span class="p">))</span>

<span class="c1"># if we have a list, it needs to be turned into a str first, then it&#39;s possible to use `str.contains`</span>
<span class="n">patents</span><span class="p">[</span><span class="n">patents</span><span class="p">[</span><span class="s1">&#39;publication_ids&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">x</span><span class="p">)))</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;pub.1032163135&quot;</span><span class="p">)]</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Modify-Dataframe-Rows-/-Columns">
<h1>Pandas Modify Dataframe Rows / Columns<a class="headerlink" href="#Pandas-Modify-Dataframe-Rows-/-Columns" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># drop columns</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;author_affiliations&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># drop column with missing values</span>
<span class="c1"># Drop the rows where at least one element is missing.</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Drop the columns where at least one element is missing.</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>

<span class="c1">#Drop the rows where all elements are missing.</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>

<span class="c1">#Keep only the rows with at least 2 non-NA values.</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">thresh</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">#Define in which columns to look for missing values.</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;born&#39;</span><span class="p">])</span>

<span class="c1">#Keep the DataFrame with valid entries in the same variable.</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Drop empty values rows, after replacing empty strings</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;FOR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;FOR&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># replace with empty list (can&#39;t be done with &#39;replace&#39;)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">ids</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="s1">&#39;ids&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;ids&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Drop rows based on values</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">col</span> <span class="o">!=</span> <span class="s2">&quot;val&quot;</span><span class="p">]</span>



<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># Add new column to existing dataframe</span>
<span class="c1"># Use the original df1 indexes to create the series:</span>
<span class="n">df1</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">sLength</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">df1</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="c1"># Declare a list that is to be converted into a column</span>
<span class="n">address</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Delhi&#39;</span><span class="p">,</span> <span class="s1">&#39;Bangalore&#39;</span><span class="p">,</span> <span class="s1">&#39;Chennai&#39;</span><span class="p">,</span> <span class="s1">&#39;Patna&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Address&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">address</span>

<span class="c1"># change column order</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">]]</span>
<span class="c1">#You can get the list of columns with:</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1"># fill in empty values</span>
<span class="c1"># fill everywhere, returns a frame</span>
<span class="n">ddf</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># this returns a series, not a frame!</span>
<span class="n">ddf</span><span class="p">[</span><span class="s1">&#39;FOR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;aaa&quot;</span><span class="p">)</span> <span class="c1"># NOTE doesn&#39;t save anything!</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Add-Columns-by-Transforming">
<h1>Pandas Add Columns by Transforming<a class="headerlink" href="#Pandas-Add-Columns-by-Transforming" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># add new column</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;M1_list&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;M1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
<span class="c1"># use apply with two cols // axis=1</span>
<span class="n">test</span><span class="p">[</span><span class="s1">&#39;search_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">google_url</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;first_name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;last_name&#39;</span><span class="p">]</span> <span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="c1"># transpose axix</span>
<span class="n">df3</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>


<span class="c1">#</span>
<span class="c1"># group by</span>
<span class="c1">#</span>
<span class="c1"># The groupby output will have an index or multi-index on rows corresponding to your chosen grouping variables.</span>
<span class="c1"># To avoid setting this index, pass âas_index=Falseâ to the groupby operation.</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">group2003</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="mi">2003</span><span class="p">)</span>
<span class="n">group2003</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="c1"># counting on groupby https://www.shanelynn.ie/summarising-aggregation-and-grouping-data-in-python-pandas/</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

<span class="c1"># Groupby and sum only one column https://stackoverflow.com/questions/38985053/pandas-groupby-and-sum-only-one-column</span>
<span class="n">df_by_concept</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;concept&#39;</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># Using groupby to filter items that occur more than once</span>
<span class="n">df_top_journals</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;journal.title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span>

<span class="c1"># Add a column that counts a variable in groupby</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">)[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="c1"># add new column by counting unique instances in another column than the grouping one</span>
<span class="n">gridaffiliations</span><span class="p">[</span><span class="s2">&quot;tot_pubs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gridaffiliations</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;aff_id&#39;</span><span class="p">])[</span><span class="s1">&#39;pub_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;nunique&#39;</span><span class="p">)</span>

<span class="c1"># group by two variables</span>
<span class="n">gridaffiliations</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;aff_id&#39;</span><span class="p">,</span> <span class="s1">&#39;pub_id&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

<span class="c1">#</span>
<span class="c1"># Splitting dictionary/list inside a Pandas Column into Separate Columns</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;dict_column&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span> <span class="c1"># return new df only for those cols</span>

<span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;dict_column&#39;</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;dict_column&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># add to existing df</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Add-Rows">
<h1>Pandas Add Rows<a class="headerlink" href="#Pandas-Add-Rows" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># by appending a DICT</span>
<span class="c1"># https://www.w3resource.com/python-exercises/pandas/python-pandas-data-frame-exercise-26.php</span>

<span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="s1">&#39;col3&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">d</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original DataFrame&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;After add one row:&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;col3&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># ignore index preserves the original index</span>



<span class="c1"># appending more than one dict</span>
<span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">source_data</span><span class="p">:</span>
  <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;col2&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;col3&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]})</span> <span class="c1"># include all cols!</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>



<span class="c1">#</span>
<span class="c1"># gen df by adding rows</span>
<span class="c1"># https://stackoverflow.com/questions/10715965/add-one-row-to-pandas-dataframe</span>
<span class="n">rows_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">input_rows</span><span class="p">:</span>

        <span class="n">dict1</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="s1">&#39;val&#39;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="s2">&quot;val&quot;</span><span class="p">}</span>
        <span class="n">rows_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dict1</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rows_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Sort-and-Remove-Duplicates-Dataframe">
<h1>Pandas Sort and Remove Duplicates Dataframe<a class="headerlink" href="#Pandas-Sort-and-Remove-Duplicates-Dataframe" title="Permalink to this headline">Â¶</a></h1>
<p><a class="reference external" href="https://thispointer.com/pandas-sort-rows-or-columns-in-dataframe-based-on-values-using-dataframe-sort_values/">https://thispointer.com/pandas-sort-rows-or-columns-in-dataframe-based-on-values-using-dataframe-sort_values/</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;quicksort&#39;</span><span class="p">,</span> <span class="n">na_position</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span>
<span class="c1"># Arguments :</span>

<span class="c1"># by : A string or list of strings basically either column names or index labels based on which sorting will be done.</span>
<span class="c1"># axis : If axis is 0, then name or list of names in by argument will be considered as column names. Default is 0</span>
<span class="c1"># If axis is 1, then name or list of names in by argument will be considered as row index labels</span>
<span class="c1"># ascending : If True sort in ascending else sort in descending order. Default is True</span>
<span class="c1"># inplace : If True, perform operation in-place in Dataframe</span>
<span class="c1"># na_position : Decides the position of NaNs after sorting i.e. irst puts NaNs at the beginning, last puts NaNs at the end</span>
<span class="c1"># Default value is âfirstâ</span>

<span class="c1"># sort in place and update the index as well</span>
<span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1"># dropping ALL duplicate values</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span> <span class="o">=</span><span class="s2">&quot;First Name&quot;</span><span class="p">,</span>
                     <span class="n">keep</span> <span class="o">=</span> <span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Iterate-Dataframe">
<h1>Pandas Iterate Dataframe<a class="headerlink" href="#Pandas-Iterate-Dataframe" title="Permalink to this headline">Â¶</a></h1>
<p><a class="reference external" href="https://stackoverflow.com/questions/16476924/how-to-iterate-over-rows-in-a-dataframe-in-pandas">https://stackoverflow.com/questions/16476924/how-to-iterate-over-rows-in-a-dataframe-in-pandas</a></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;c2&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Merge-and-Aggregate-Dataframe">
<h1>Pandas Merge and Aggregate Dataframe<a class="headerlink" href="#Pandas-Merge-and-Aggregate-Dataframe" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">dfy</span><span class="p">,</span> <span class="n">dfyears_nl</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>

<span class="c1"># concenate dataframes simply add new rows at the bottom</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">df2</span><span class="p">,</span> <span class="n">df3</span><span class="p">])</span>
<span class="c1"># then usually sort and reset index for visualizations etc...</span>
<span class="n">res</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;years&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">res</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;years&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">res</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="c1"># melt</span>
<span class="n">formatted_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
                       <span class="p">[</span><span class="s2">&quot;religion&quot;</span><span class="p">],</span>  <span class="c1"># the columns to keep as is</span>
                       <span class="n">var_name</span><span class="o">=</span><span class="s2">&quot;income&quot;</span><span class="p">,</span>  <span class="c1"># the columnn grouping all melted columns</span>
                       <span class="n">value_name</span><span class="o">=</span><span class="s2">&quot;freq&quot;</span><span class="p">)</span>  <span class="c1"># the column counting the objects melted</span>
<span class="n">formatted_df</span> <span class="o">=</span> <span class="n">formatted_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;religion&quot;</span><span class="p">])</span>
<span class="n">formatted_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-flatten-JSON-data">
<h1>Pandas flatten JSON data<a class="headerlink" href="#Pandas-flatten-JSON-data" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="kn">import</span> <span class="n">json_normalize</span>

<span class="n">dfjournals</span> <span class="o">=</span> <span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">publications</span><span class="p">)</span> <span class="c1"># returns a new column journal.title</span>
<span class="n">dfjournals</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1">#</span>
<span class="c1"># normalize a nested object</span>
<span class="c1">#</span>
<span class="c1"># ensure that all pubs have a valid (empty, even) key</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">publications</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;FOR&#39;</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[</span><span class="s1">&#39;FOR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x</span><span class="p">[</span><span class="s1">&#39;FOR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span> <span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">][</span><span class="mi">5</span><span class="p">:]}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;FOR&#39;</span><span class="p">]]</span> <span class="c1"># also remove the digit prefix to improve legibility</span>
<span class="c1"># then</span>
<span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">publications</span><span class="p">,</span> <span class="n">record_path</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;FOR&#39;</span><span class="p">],</span> <span class="n">meta</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;doi&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">record_prefix</span><span class="o">=</span><span class="s1">&#39;for_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>


<span class="c1"># recursive applications</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="n">json_normalize</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">df_aff1</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)),</span> <span class="n">record_path</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;affiliations&#39;</span><span class="p">],</span>
               <span class="n">meta</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;researcher_id&#39;</span><span class="p">,</span> <span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="s1">&#39;last_name&#39;</span><span class="p">],</span> <span class="n">record_prefix</span><span class="o">=</span><span class="s1">&#39;aff_&#39;</span><span class="p">)</span>


<span class="c1"># unpack a dict value into separate columns</span>
<span class="c1"># https://stackoverflow.com/questions/50512188/unpack-dictionary-from-pandas-column</span>
<span class="n">concepts</span><span class="p">[</span><span class="s1">&#39;concepts_scores&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span>

<span class="c1"># enrich original df with unpacked columns - need to dropna on original df first</span>
<span class="n">concepts</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;concepts_scores&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;concepts_scores&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="o">**</span><span class="n">concepts</span><span class="p">[</span><span class="s1">&#39;concepts_scores&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">))</span>


</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-Update-Data-in-Frame-While-Iterating">
<h1>Pandas Update Data in Frame While Iterating<a class="headerlink" href="#Pandas-Update-Data-in-Frame-While-Iterating" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">===</span><span class="se">\n</span><span class="s2">Counting clinical_trials for each publication...&quot;</span><span class="p">)</span>

<span class="c1"># build str column version for checking inclusion</span>
<span class="n">clinical_trials</span><span class="p">[</span><span class="s1">&#39;publication_ids_str&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">clinical_trials</span><span class="p">[</span><span class="s1">&#39;publication_ids&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">x</span><span class="p">)))</span>
<span class="k">def</span> <span class="nf">get_clinical_trials_per_pub</span><span class="p">(</span><span class="n">pubid</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">clinical_trials</span>
    <span class="c1"># turn list into str and check content in one line</span>
    <span class="k">return</span> <span class="n">clinical_trials</span><span class="p">[</span><span class="n">clinical_trials</span><span class="p">[</span><span class="s1">&#39;publication_ids_str&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pubid</span><span class="p">)][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

<span class="c1"># using &#39;AT&#39; method</span>
<span class="n">publications</span><span class="p">[</span><span class="s1">&#39;clinical_trials_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">publications</span><span class="p">[</span><span class="s1">&#39;clinical_trials_ids&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">pbar</span><span class="p">(</span><span class="n">publications</span><span class="o">.</span><span class="n">iterrows</span><span class="p">(),</span> <span class="n">total</span><span class="o">=</span><span class="n">publications</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
    <span class="n">match_clinical_trials</span> <span class="o">=</span> <span class="n">get_clinical_trials_per_pub</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
    <span class="n">publications</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span><span class="s1">&#39;clinical_trials_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">match_clinical_trials</span><span class="p">)</span>
    <span class="n">publications</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index</span><span class="p">,</span><span class="s1">&#39;clinical_trials_ids&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">match_clinical_trials</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Python-strip-punctuation">
<h1>Python strip punctuation<a class="headerlink" href="#Python-strip-punctuation" title="Permalink to this headline">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">string</span>
<span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&amp;&amp;**^^hello&quot;</span>
<span class="n">s</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">maketrans</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">string</span><span class="o">.</span><span class="n">punctuation</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Pandas-avoid-setting-with-copy-warning">
<h1>Pandas avoid setting with copy warning<a class="headerlink" href="#Pandas-avoid-setting-with-copy-warning" title="Permalink to this headline">Â¶</a></h1>
<p>The warning was generated because we have chained two indexing operations together. This is made easier to spot because weâve used square brackets twice, but the same would be true if we used other access methods such as .bidderrate, .loc[], .iloc[], .ix[] and so on.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.dataquest.io/blog/settingwithcopywarning/">https://www.dataquest.io/blog/settingwithcopywarning/</a></p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#</span>
<span class="c1"># explicit chaining</span>
<span class="c1">#</span>
<span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">bidder</span> <span class="o">==</span> <span class="s1">&#39;parakeet2004&#39;</span><span class="p">][</span><span class="s1">&#39;bidderrate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="c1"># instead we do</span>
<span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">bidder</span> <span class="o">==</span> <span class="s1">&#39;parakeet2004&#39;</span><span class="p">,</span> <span class="s1">&#39;bidderrate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1">#</span>
<span class="c1"># hidden chaining</span>
<span class="c1">#</span>
<span class="n">winners</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">bid</span> <span class="o">==</span> <span class="n">data</span><span class="o">.</span><span class="n">price</span><span class="p">]</span>
<span class="n">winners</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">304</span><span class="p">,</span> <span class="s1">&#39;bidder&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;therealname&#39;</span> <span class="c1"># =&gt; warning</span>
<span class="c1"># instead we do</span>
<span class="n">winners</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">bid</span> <span class="o">==</span> <span class="n">data</span><span class="o">.</span><span class="n">price</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">winners</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">304</span><span class="p">,</span> <span class="s1">&#39;bidder&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;therealname&#39;</span> <span class="c1"># =&gt; works!</span>
</pre></div>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Dimcli open in colab badge</a></li>
<li><a class="reference internal" href="#Dimcli-Install---Short-Version">Dimcli Install - Short Version</a></li>
<li><a class="reference internal" href="#Dimcli-Install---Long-Version-with-PSW-hiding">Dimcli Install - Long Version with PSW hiding</a></li>
<li><a class="reference internal" href="#Dimcli-Install---Newest-version-with-PSW-hiding">Dimcli Install - Newest version with PSW hiding</a></li>
<li><a class="reference internal" href="#Dimcli-Selector-With-Dropdowns">Dimcli Selector With Dropdowns</a></li>
<li><a class="reference internal" href="#Dimcli-looped-query-using-chunks">Dimcli looped query using <code class="docutils literal notranslate"><span class="pre">chunks</span></code></a></li>
<li><a class="reference internal" href="#Dimcli-nested-looped-query-with-chunks">Dimcli nested looped query with <code class="docutils literal notranslate"><span class="pre">chunks</span></code></a></li>
<li><a class="reference internal" href="#Print-libraries-versions">Print libraries versions</a></li>
<li><a class="reference internal" href="#Plotly-chart-with-basic-stats-about-publication-authors-or-affiliations">Plotly chart with basic stats about publication authors or affiliations</a></li>
<li><a class="reference internal" href="#Dimcli-chart-with-basic-stats-about-publication-affiliations">Dimcli chart with basic stats about publication affiliations</a></li>
<li><a class="reference internal" href="#Plotly-quick-chart">Plotly quick chart</a></li>
<li><a class="reference internal" href="#Plotly-Export-to-a-file">Plotly Export to a file</a></li>
<li><a class="reference internal" href="#Plotly-Create-Multiple-Charts-at-the-same-time">Plotly Create Multiple Charts at the same time</a></li>
<li><a class="reference internal" href="#Plotly-fill-in-missing-years-with-pandas">Plotly fill in missing years with pandas</a></li>
<li><a class="reference internal" href="#Zip-file-archive-and-download-from-Colab">Zip file archive and download from Colab</a></li>
<li><a class="reference internal" href="#Pandas-Create-Dataframe">Pandas Create Dataframe</a></li>
<li><a class="reference internal" href="#Pandas-Describe-and-Count-Values">Pandas Describe and Count Values</a></li>
<li><a class="reference internal" href="#Pandas-get-Dataframe-Cell-Values">Pandas get Dataframe Cell Values</a></li>
<li><a class="reference internal" href="#Pandas-Select-and-Rename-Dataframe">Pandas Select and Rename Dataframe</a></li>
<li><a class="reference internal" href="#Pandas-Subset-Dataframe-via-Slicing-or-Query">Pandas Subset Dataframe via Slicing or Query</a></li>
<li><a class="reference internal" href="#Pandas-Modify-Dataframe-Rows-/-Columns">Pandas Modify Dataframe Rows / Columns</a></li>
<li><a class="reference internal" href="#Pandas-Add-Columns-by-Transforming">Pandas Add Columns by Transforming</a></li>
<li><a class="reference internal" href="#Pandas-Add-Rows">Pandas Add Rows</a></li>
<li><a class="reference internal" href="#Pandas-Sort-and-Remove-Duplicates-Dataframe">Pandas Sort and Remove Duplicates Dataframe</a></li>
<li><a class="reference internal" href="#Pandas-Iterate-Dataframe">Pandas Iterate Dataframe</a></li>
<li><a class="reference internal" href="#Pandas-Merge-and-Aggregate-Dataframe">Pandas Merge and Aggregate Dataframe</a></li>
<li><a class="reference internal" href="#Pandas-flatten-JSON-data">Pandas flatten JSON data</a></li>
<li><a class="reference internal" href="#Pandas-Update-Data-in-Frame-While-Iterating">Pandas Update Data in Frame While Iterating</a></li>
<li><a class="reference internal" href="#Python-strip-punctuation">Python strip punctuation</a></li>
<li><a class="reference internal" href="#Pandas-avoid-setting-with-copy-warning">Pandas avoid setting with copy warning</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../tqdm.html"
                        title="previous chapter">Tqdm and jupyter integration</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../Pandas/pandas recipes.html"
                        title="next chapter">Pandas Recipes</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/notebooks/1-snippets/DimcliSnippets.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../Pandas/pandas recipes.html" title="Pandas Recipes"
             >next</a> |</li>
        <li class="right" >
          <a href="../tqdm.html" title="Tqdm and jupyter integration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Python tests [PRIVATE]</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Dimcli open in colab badge</a></li> 
      </ul>
    </div>
   
    <div class="footer" role="contentinfo">
    </div>

    <!-- Adds target=_blank to external links -->

  <script type="text/javascript">
    $(document).ready(function () {
      $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').attr('target', '_blank');
    });
  </script>
  

  </body>
</html>