{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "AuCkj0Qwywjy"
   },
   "source": [
    "# QA of DSL Release v1.20\n",
    "The purpose of this notebook is to review and test the new features in 1.20\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false"
   },
   "source": [
    "## Prerequisites\n",
    "\n",
    "Please install the latest versions of these libraries to run this notebook. \n",
    "\n",
    "> NOTE: if you are using Google Colab, at the end of the installation please click the **'Restart Runtime'** button"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 1000
    },
    "colab_type": "code",
    "id": "c2I9px-by3f7",
    "outputId": "0358a8fb-fc08-4b82-9a5d-354d0266d3ba"
   },
   "outputs": [],
   "source": [
    "# NOTE at the end of the installation please click the 'Restart Runtime' button \n",
    "!pip install dimcli prompt-toolkit ipython -U"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "Collapsed": "false",
    "colab": {
     "base_uri": "https://localhost:8080/",
     "height": 201
    },
    "colab_type": "code",
    "id": "d_QovOzaywj0",
    "outputId": "1f57c560-d772-4a70-ccd4-1a816c674b19"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DimCli v0.5.6.2 - Succesfully connected to <https://integration.ds-metrics.com> (method: dsl.ini file)\n"
     ]
    }
   ],
   "source": [
    "import dimcli\n",
    "from dimcli.shortcuts import dslquery, dslqueryall\n",
    "import pandas as pd\n",
    "dimcli.login(instance=\"test\")\n",
    "dsl = dimcli.Dsl() # by default it reuses object from %dsl_login"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "JcnVEdOAywj3"
   },
   "source": [
    "---"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "YBSdHL4Tywj4"
   },
   "source": [
    "## DSL-246 extract_grants error message\n",
    "\n",
    "https://uberresearch.atlassian.net/browse/DSL-246\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "Dkzs2a5Cywj4",
    "outputId": "039b6d78-b31b-4175-dfba-fe9d0c56f3ab"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Semantic Error\n",
      "Semantic errors found:\n",
      "\textract_grants() must specify either 'fundref' or 'funder_name' alongside with a required argument 'grant_number'\n"
     ]
    }
   ],
   "source": [
    "%%dsl_query \n",
    "extract_grants(funder_name=\"NIH\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "gHC1vhXVywj6"
   },
   "source": [
    "---\n",
    "## DSL-240 Allow filtering on researcher.orcid\n",
    "\n",
    "https://uberresearch.atlassian.net/browse/DSL-240"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "6JON79b6ywj7",
    "outputId": "caf1e026-02ef-46e0-9997-2545181542d2"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Researchers: 20 (total = 5211650)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>first_name</th>\n",
       "      <th>id</th>\n",
       "      <th>last_name</th>\n",
       "      <th>orcid_id</th>\n",
       "      <th>research_orgs</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Inmaculada</td>\n",
       "      <td>ur.016357053263.55</td>\n",
       "      <td>Coleto</td>\n",
       "      <td>[0000-0001-8003-4806]</td>\n",
       "      <td>[{'id': 'grid.411901.c', 'acronym': 'UCO', 'na...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Worapol</td>\n",
       "      <td>ur.01216071414.35</td>\n",
       "      <td>Ngamcherdtrakul</td>\n",
       "      <td>[0000-0003-4187-7709]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Barry</td>\n",
       "      <td>ur.07731757647.27</td>\n",
       "      <td>Kirwan</td>\n",
       "      <td>[0000-0003-2366-4849]</td>\n",
       "      <td>[{'id': 'grid.13063.37', 'acronym': 'LSE', 'na...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Woo Il</td>\n",
       "      <td>ur.01244245175.83</td>\n",
       "      <td>Kwon</td>\n",
       "      <td>[0000-0002-4827-7805]</td>\n",
       "      <td>[{'id': 'grid.264381.a', 'acronym': 'SKKU', 'n...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Worapol</td>\n",
       "      <td>ur.011475726704.94</td>\n",
       "      <td>Ngamcherdtrakul</td>\n",
       "      <td>[0000-0003-4187-7709]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Worapol</td>\n",
       "      <td>ur.014473542403.63</td>\n",
       "      <td>Ngamcherdtrakul</td>\n",
       "      <td>[0000-0003-4187-7709]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Shaun M</td>\n",
       "      <td>ur.015064267721.40</td>\n",
       "      <td>Goodyear</td>\n",
       "      <td>[0000-0003-0217-0890]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Ali</td>\n",
       "      <td>ur.015224132520.75</td>\n",
       "      <td>Sharafi</td>\n",
       "      <td>[0000-0002-6012-1424]</td>\n",
       "      <td>[{'id': 'grid.469309.1', 'name': 'Zanjan Unive...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Wen-Bo</td>\n",
       "      <td>ur.011732537254.20</td>\n",
       "      <td>Peng</td>\n",
       "      <td>[0000-0001-9747-2466]</td>\n",
       "      <td>[{'id': 'grid.117476.2', 'acronym': 'UTS', 'na...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Wen-Bo</td>\n",
       "      <td>ur.012630051737.90</td>\n",
       "      <td>Peng</td>\n",
       "      <td>[0000-0001-9747-2466]</td>\n",
       "      <td>[{'id': 'grid.117476.2', 'acronym': 'UTS', 'na...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Wen-Bo</td>\n",
       "      <td>ur.013211442747.79</td>\n",
       "      <td>Peng</td>\n",
       "      <td>[0000-0001-9747-2466]</td>\n",
       "      <td>[{'id': 'grid.117476.2', 'acronym': 'UTS', 'na...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Zhi-Feng</td>\n",
       "      <td>ur.014230437650.45</td>\n",
       "      <td>Ding</td>\n",
       "      <td>[0000-0001-6631-5046]</td>\n",
       "      <td>[{'id': 'grid.13402.34', 'acronym': 'ZJU', 'na...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Yen-Po</td>\n",
       "      <td>ur.010770737030.32</td>\n",
       "      <td>Yeh</td>\n",
       "      <td>[0000-0002-1091-387X]</td>\n",
       "      <td>[{'id': 'grid.487401.e', 'name': 'Changhua Cou...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>Yifan</td>\n",
       "      <td>ur.0662305414.82</td>\n",
       "      <td>Li</td>\n",
       "      <td>[0000-0002-1247-0718]</td>\n",
       "      <td>[{'id': 'grid.33763.32', 'acronym': 'TJU', 'na...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>Jennifer L</td>\n",
       "      <td>ur.013376505201.44</td>\n",
       "      <td>Beaumont</td>\n",
       "      <td>[0000-0002-1484-260X]</td>\n",
       "      <td>[{'id': 'grid.15276.37', 'acronym': 'UF', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Joo-Hyun</td>\n",
       "      <td>ur.015662426531.41</td>\n",
       "      <td>Kim</td>\n",
       "      <td>[0000-0001-8415-547X]</td>\n",
       "      <td>[{'id': 'grid.49100.3c', 'acronym': 'POSTECH '...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Joo-Hyun</td>\n",
       "      <td>ur.015557776050.09</td>\n",
       "      <td>Kim</td>\n",
       "      <td>[0000-0001-8415-547X]</td>\n",
       "      <td>[{'id': 'grid.49100.3c', 'acronym': 'POSTECH '...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>Guangwei</td>\n",
       "      <td>ur.01337576314.78</td>\n",
       "      <td>He</td>\n",
       "      <td>[0000-0002-6580-5219]</td>\n",
       "      <td>[{'id': 'grid.33763.32', 'acronym': 'TJU', 'na...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>Zhi-Wei</td>\n",
       "      <td>ur.015031410727.40</td>\n",
       "      <td>Ning</td>\n",
       "      <td>[0000-0002-6080-9878]</td>\n",
       "      <td>[{'id': 'grid.24696.3f', 'acronym': 'CUMS', 'n...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>Guangwei</td>\n",
       "      <td>ur.011564313210.31</td>\n",
       "      <td>He</td>\n",
       "      <td>[0000-0002-6580-5219]</td>\n",
       "      <td>[{'id': 'grid.33763.32', 'acronym': 'TJU', 'na...</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "    first_name                  id        last_name               orcid_id  \\\n",
       "0   Inmaculada  ur.016357053263.55           Coleto  [0000-0001-8003-4806]   \n",
       "1      Worapol   ur.01216071414.35  Ngamcherdtrakul  [0000-0003-4187-7709]   \n",
       "2        Barry   ur.07731757647.27           Kirwan  [0000-0003-2366-4849]   \n",
       "3       Woo Il   ur.01244245175.83             Kwon  [0000-0002-4827-7805]   \n",
       "4      Worapol  ur.011475726704.94  Ngamcherdtrakul  [0000-0003-4187-7709]   \n",
       "5      Worapol  ur.014473542403.63  Ngamcherdtrakul  [0000-0003-4187-7709]   \n",
       "6      Shaun M  ur.015064267721.40         Goodyear  [0000-0003-0217-0890]   \n",
       "7          Ali  ur.015224132520.75          Sharafi  [0000-0002-6012-1424]   \n",
       "8       Wen-Bo  ur.011732537254.20             Peng  [0000-0001-9747-2466]   \n",
       "9       Wen-Bo  ur.012630051737.90             Peng  [0000-0001-9747-2466]   \n",
       "10      Wen-Bo  ur.013211442747.79             Peng  [0000-0001-9747-2466]   \n",
       "11    Zhi-Feng  ur.014230437650.45             Ding  [0000-0001-6631-5046]   \n",
       "12      Yen-Po  ur.010770737030.32              Yeh  [0000-0002-1091-387X]   \n",
       "13       Yifan    ur.0662305414.82               Li  [0000-0002-1247-0718]   \n",
       "14  Jennifer L  ur.013376505201.44         Beaumont  [0000-0002-1484-260X]   \n",
       "15    Joo-Hyun  ur.015662426531.41              Kim  [0000-0001-8415-547X]   \n",
       "16    Joo-Hyun  ur.015557776050.09              Kim  [0000-0001-8415-547X]   \n",
       "17    Guangwei   ur.01337576314.78               He  [0000-0002-6580-5219]   \n",
       "18     Zhi-Wei  ur.015031410727.40             Ning  [0000-0002-6080-9878]   \n",
       "19    Guangwei  ur.011564313210.31               He  [0000-0002-6580-5219]   \n",
       "\n",
       "                                        research_orgs  \n",
       "0   [{'id': 'grid.411901.c', 'acronym': 'UCO', 'na...  \n",
       "1   [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  \n",
       "2   [{'id': 'grid.13063.37', 'acronym': 'LSE', 'na...  \n",
       "3   [{'id': 'grid.264381.a', 'acronym': 'SKKU', 'n...  \n",
       "4   [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  \n",
       "5   [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  \n",
       "6   [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  \n",
       "7   [{'id': 'grid.469309.1', 'name': 'Zanjan Unive...  \n",
       "8   [{'id': 'grid.117476.2', 'acronym': 'UTS', 'na...  \n",
       "9   [{'id': 'grid.117476.2', 'acronym': 'UTS', 'na...  \n",
       "10  [{'id': 'grid.117476.2', 'acronym': 'UTS', 'na...  \n",
       "11  [{'id': 'grid.13402.34', 'acronym': 'ZJU', 'na...  \n",
       "12  [{'id': 'grid.487401.e', 'name': 'Changhua Cou...  \n",
       "13  [{'id': 'grid.33763.32', 'acronym': 'TJU', 'na...  \n",
       "14  [{'id': 'grid.15276.37', 'acronym': 'UF', 'nam...  \n",
       "15  [{'id': 'grid.49100.3c', 'acronym': 'POSTECH '...  \n",
       "16  [{'id': 'grid.49100.3c', 'acronym': 'POSTECH '...  \n",
       "17  [{'id': 'grid.33763.32', 'acronym': 'TJU', 'na...  \n",
       "18  [{'id': 'grid.24696.3f', 'acronym': 'CUMS', 'n...  \n",
       "19  [{'id': 'grid.33763.32', 'acronym': 'TJU', 'na...  "
      ]
     },
     "execution_count": 5,
     "metadata": {
      "tags": []
     },
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%%dsl_query_as_df \n",
    "search researchers where orcid_id is not empty return researchers"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "-DS-daMnywj8",
    "outputId": "63bc2154-fb0c-4304-dd9e-eda5a05f6b53"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Researchers: 5 (total = 5)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>first_name</th>\n",
       "      <th>id</th>\n",
       "      <th>last_name</th>\n",
       "      <th>obsolete</th>\n",
       "      <th>orcid_id</th>\n",
       "      <th>research_orgs</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Worapol</td>\n",
       "      <td>ur.01216071414.35</td>\n",
       "      <td>Ngamcherdtrakul</td>\n",
       "      <td>NaN</td>\n",
       "      <td>[0000-0003-4187-7709]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Worapol</td>\n",
       "      <td>ur.011475726704.94</td>\n",
       "      <td>Ngamcherdtrakul</td>\n",
       "      <td>1.0</td>\n",
       "      <td>[0000-0003-4187-7709]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Worapol</td>\n",
       "      <td>ur.014473542403.63</td>\n",
       "      <td>Ngamcherdtrakul</td>\n",
       "      <td>1.0</td>\n",
       "      <td>[0000-0003-4187-7709]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Worapol</td>\n",
       "      <td>ur.014370556374.69</td>\n",
       "      <td>Ngamcherdtrakul</td>\n",
       "      <td>1.0</td>\n",
       "      <td>[0000-0003-4187-7709]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Worapol</td>\n",
       "      <td>ur.013471326721.29</td>\n",
       "      <td>Ngamcherdtrakul</td>\n",
       "      <td>1.0</td>\n",
       "      <td>[0000-0003-4187-7709]</td>\n",
       "      <td>[{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "  first_name                  id        last_name  obsolete  \\\n",
       "0    Worapol   ur.01216071414.35  Ngamcherdtrakul       NaN   \n",
       "1    Worapol  ur.011475726704.94  Ngamcherdtrakul       1.0   \n",
       "2    Worapol  ur.014473542403.63  Ngamcherdtrakul       1.0   \n",
       "3    Worapol  ur.014370556374.69  Ngamcherdtrakul       1.0   \n",
       "4    Worapol  ur.013471326721.29  Ngamcherdtrakul       1.0   \n",
       "\n",
       "                orcid_id                                      research_orgs  \n",
       "0  [0000-0003-4187-7709]  [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  \n",
       "1  [0000-0003-4187-7709]  [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  \n",
       "2  [0000-0003-4187-7709]  [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  \n",
       "3  [0000-0003-4187-7709]  [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  \n",
       "4  [0000-0003-4187-7709]  [{'id': 'grid.5288.7', 'acronym': 'OHSU', 'nam...  "
      ]
     },
     "execution_count": 10,
     "metadata": {
      "tags": []
     },
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%%dsl_query_as_df  \n",
    "search researchers where orcid_id = \"0000-0003-4187-7709\" return researchers[basics+obsolete]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "m-jIxh0lywj-",
    "outputId": "3de47b7c-cc15-47f8-f7aa-793fc0018a3c"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Publications: 16 (total = 16)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>author_affiliations</th>\n",
       "      <th>id</th>\n",
       "      <th>issue</th>\n",
       "      <th>journal.id</th>\n",
       "      <th>journal.title</th>\n",
       "      <th>pages</th>\n",
       "      <th>title</th>\n",
       "      <th>type</th>\n",
       "      <th>volume</th>\n",
       "      <th>year</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>[[{'first_name': 'Worapol', 'last_name': 'Ngam...</td>\n",
       "      <td>pub.1111638900</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1045337</td>\n",
       "      <td>Scientific Reports</td>\n",
       "      <td>709</td>\n",
       "      <td>Removal of a gadolinium based contrast agent b...</td>\n",
       "      <td>article</td>\n",
       "      <td>9</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>[[{'first_name': 'Worapol', 'last_name': 'Ngam...</td>\n",
       "      <td>pub.1112781956</td>\n",
       "      <td>1</td>\n",
       "      <td>jour.1053072</td>\n",
       "      <td>BioEngineering</td>\n",
       "      <td>23</td>\n",
       "      <td>Lanthanide-Loaded Nanoparticles as Potential F...</td>\n",
       "      <td>article</td>\n",
       "      <td>6</td>\n",
       "      <td>2019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>[[{'first_name': 'Worapol', 'last_name': 'Ngam...</td>\n",
       "      <td>pub.1105448100</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1036368</td>\n",
       "      <td>International Journal of Nanomedicine</td>\n",
       "      <td>4015-4027</td>\n",
       "      <td>Lyophilization and stability of antibody-conju...</td>\n",
       "      <td>article</td>\n",
       "      <td>13</td>\n",
       "      <td>2018</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>[[{'first_name': 'Shenda', 'last_name': 'Gu', ...</td>\n",
       "      <td>pub.1104456474</td>\n",
       "      <td>6</td>\n",
       "      <td>jour.1037553</td>\n",
       "      <td>PLoS ONE</td>\n",
       "      <td>e0198141</td>\n",
       "      <td>Lack of acquired resistance in HER2-positive b...</td>\n",
       "      <td>article</td>\n",
       "      <td>13</td>\n",
       "      <td>2018</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>[[{'first_name': 'Jingga', 'last_name': 'Morry...</td>\n",
       "      <td>pub.1083395493</td>\n",
       "      <td>4</td>\n",
       "      <td>jour.1030157</td>\n",
       "      <td>Molecular Cancer Therapeutics</td>\n",
       "      <td>763-772</td>\n",
       "      <td>Targeted Treatment of Metastatic Breast Cancer...</td>\n",
       "      <td>article</td>\n",
       "      <td>16</td>\n",
       "      <td>2017</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>[[{'first_name': 'Jingga', 'last_name': 'Morry...</td>\n",
       "      <td>pub.1024214513</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1048218</td>\n",
       "      <td>Redox Biology</td>\n",
       "      <td>240-253</td>\n",
       "      <td>Oxidative stress in cancer and fibrosis: Oppor...</td>\n",
       "      <td>article</td>\n",
       "      <td>11</td>\n",
       "      <td>2017</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>[[{'first_name': 'Worapol', 'last_name': 'Ngam...</td>\n",
       "      <td>pub.1048478117</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1081624</td>\n",
       "      <td>Cancer Treatment Reviews</td>\n",
       "      <td>19-29</td>\n",
       "      <td>Current development of targeted oligonucleotid...</td>\n",
       "      <td>article</td>\n",
       "      <td>45</td>\n",
       "      <td>2016</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>[[{'first_name': 'Shenda', 'last_name': 'Gu', ...</td>\n",
       "      <td>pub.1008796979</td>\n",
       "      <td>12</td>\n",
       "      <td>jour.1043645</td>\n",
       "      <td>Oncotarget</td>\n",
       "      <td>14727-14741</td>\n",
       "      <td>Therapeutic siRNA for drug-resistant HER2-posi...</td>\n",
       "      <td>article</td>\n",
       "      <td>7</td>\n",
       "      <td>2016</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>[[{'first_name': 'Jingga', 'last_name': 'Morry...</td>\n",
       "      <td>pub.1009408394</td>\n",
       "      <td>NaN</td>\n",
       "      <td>jour.1097145</td>\n",
       "      <td>Biomaterials</td>\n",
       "      <td>292</td>\n",
       "      <td>Erratum to “Dermal delivery of HSP47 siRNA wit...</td>\n",
       "      <td>article</td>\n",
       "      <td>74</td>\n",
       "      <td>2016</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>[[{'first_name': 'Jingga', 'last_name': 'Morry...</td>\n",
       "      <td>pub.1012567648</td>\n",
       "      <td>Biochim. Biophys. Acta 1832 2013</td>\n",
       "      <td>jour.1097145</td>\n",
       "      <td>Biomaterials</td>\n",
       "      <td>41-52</td>\n",
       "      <td>Dermal delivery of HSP47 siRNA with NOX4-modul...</td>\n",
       "      <td>article</td>\n",
       "      <td>66</td>\n",
       "      <td>2015</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>[[{'first_name': 'Worapol', 'last_name': 'Ngam...</td>\n",
       "      <td>pub.1004184218</td>\n",
       "      <td>18</td>\n",
       "      <td>jour.1032876</td>\n",
       "      <td>Advanced Functional Materials</td>\n",
       "      <td>2646-2659</td>\n",
       "      <td>Cationic Polymer Modified Mesoporous Silica Na...</td>\n",
       "      <td>article</td>\n",
       "      <td>25</td>\n",
       "      <td>2015</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>[[{'first_name': 'Worapol', 'last_name': 'Ngam...</td>\n",
       "      <td>pub.1002052832</td>\n",
       "      <td>18</td>\n",
       "      <td>jour.1032876</td>\n",
       "      <td>Advanced Functional Materials</td>\n",
       "      <td>2629-2629</td>\n",
       "      <td>Cancer Nanomedicine: Cationic Polymer Modified...</td>\n",
       "      <td>article</td>\n",
       "      <td>25</td>\n",
       "      <td>2015</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>[[{'first_name': 'Thanapon', 'last_name': 'San...</td>\n",
       "      <td>pub.1007837261</td>\n",
       "      <td>23</td>\n",
       "      <td>jour.1041450</td>\n",
       "      <td>ACS Applied Materials &amp; Interfaces</td>\n",
       "      <td>21750-21750</td>\n",
       "      <td>Correction\\nto Novel Oral Detoxification of Me...</td>\n",
       "      <td>article</td>\n",
       "      <td>6</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>[[{'first_name': 'Thanapon', 'last_name': 'San...</td>\n",
       "      <td>pub.1043926810</td>\n",
       "      <td>8</td>\n",
       "      <td>jour.1041450</td>\n",
       "      <td>ACS Applied Materials &amp; Interfaces</td>\n",
       "      <td>5483-93</td>\n",
       "      <td>Novel oral detoxification of mercury, cadmium,...</td>\n",
       "      <td>article</td>\n",
       "      <td>6</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>[[{'first_name': 'Thanapon', 'last_name': 'San...</td>\n",
       "      <td>pub.1072331031</td>\n",
       "      <td>04</td>\n",
       "      <td>jour.1045265</td>\n",
       "      <td>Journal of Nanomedicine &amp; Nanotechnology</td>\n",
       "      <td>NaN</td>\n",
       "      <td>Nanoporous sorbent material as an oral phospha...</td>\n",
       "      <td>article</td>\n",
       "      <td>5</td>\n",
       "      <td>2014</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>[[{'first_name': 'Zhi', 'last_name': 'Hu', 'co...</td>\n",
       "      <td>pub.1063247220</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>lb-258-lb-258</td>\n",
       "      <td>Abstract LB-258: Developing therapeutic siRNA ...</td>\n",
       "      <td>proceeding</td>\n",
       "      <td>NaN</td>\n",
       "      <td>2012</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                  author_affiliations              id  \\\n",
       "0   [[{'first_name': 'Worapol', 'last_name': 'Ngam...  pub.1111638900   \n",
       "1   [[{'first_name': 'Worapol', 'last_name': 'Ngam...  pub.1112781956   \n",
       "2   [[{'first_name': 'Worapol', 'last_name': 'Ngam...  pub.1105448100   \n",
       "3   [[{'first_name': 'Shenda', 'last_name': 'Gu', ...  pub.1104456474   \n",
       "4   [[{'first_name': 'Jingga', 'last_name': 'Morry...  pub.1083395493   \n",
       "5   [[{'first_name': 'Jingga', 'last_name': 'Morry...  pub.1024214513   \n",
       "6   [[{'first_name': 'Worapol', 'last_name': 'Ngam...  pub.1048478117   \n",
       "7   [[{'first_name': 'Shenda', 'last_name': 'Gu', ...  pub.1008796979   \n",
       "8   [[{'first_name': 'Jingga', 'last_name': 'Morry...  pub.1009408394   \n",
       "9   [[{'first_name': 'Jingga', 'last_name': 'Morry...  pub.1012567648   \n",
       "10  [[{'first_name': 'Worapol', 'last_name': 'Ngam...  pub.1004184218   \n",
       "11  [[{'first_name': 'Worapol', 'last_name': 'Ngam...  pub.1002052832   \n",
       "12  [[{'first_name': 'Thanapon', 'last_name': 'San...  pub.1007837261   \n",
       "13  [[{'first_name': 'Thanapon', 'last_name': 'San...  pub.1043926810   \n",
       "14  [[{'first_name': 'Thanapon', 'last_name': 'San...  pub.1072331031   \n",
       "15  [[{'first_name': 'Zhi', 'last_name': 'Hu', 'co...  pub.1063247220   \n",
       "\n",
       "                               issue    journal.id  \\\n",
       "0                                  1  jour.1045337   \n",
       "1                                  1  jour.1053072   \n",
       "2                                NaN  jour.1036368   \n",
       "3                                  6  jour.1037553   \n",
       "4                                  4  jour.1030157   \n",
       "5                                NaN  jour.1048218   \n",
       "6                                NaN  jour.1081624   \n",
       "7                                 12  jour.1043645   \n",
       "8                                NaN  jour.1097145   \n",
       "9   Biochim. Biophys. Acta 1832 2013  jour.1097145   \n",
       "10                                18  jour.1032876   \n",
       "11                                18  jour.1032876   \n",
       "12                                23  jour.1041450   \n",
       "13                                 8  jour.1041450   \n",
       "14                                04  jour.1045265   \n",
       "15                               NaN           NaN   \n",
       "\n",
       "                               journal.title          pages  \\\n",
       "0                         Scientific Reports            709   \n",
       "1                             BioEngineering             23   \n",
       "2      International Journal of Nanomedicine      4015-4027   \n",
       "3                                   PLoS ONE       e0198141   \n",
       "4              Molecular Cancer Therapeutics        763-772   \n",
       "5                              Redox Biology        240-253   \n",
       "6                   Cancer Treatment Reviews          19-29   \n",
       "7                                 Oncotarget    14727-14741   \n",
       "8                               Biomaterials            292   \n",
       "9                               Biomaterials          41-52   \n",
       "10             Advanced Functional Materials      2646-2659   \n",
       "11             Advanced Functional Materials      2629-2629   \n",
       "12        ACS Applied Materials & Interfaces    21750-21750   \n",
       "13        ACS Applied Materials & Interfaces        5483-93   \n",
       "14  Journal of Nanomedicine & Nanotechnology            NaN   \n",
       "15                                       NaN  lb-258-lb-258   \n",
       "\n",
       "                                                title        type volume  year  \n",
       "0   Removal of a gadolinium based contrast agent b...     article      9  2019  \n",
       "1   Lanthanide-Loaded Nanoparticles as Potential F...     article      6  2019  \n",
       "2   Lyophilization and stability of antibody-conju...     article     13  2018  \n",
       "3   Lack of acquired resistance in HER2-positive b...     article     13  2018  \n",
       "4   Targeted Treatment of Metastatic Breast Cancer...     article     16  2017  \n",
       "5   Oxidative stress in cancer and fibrosis: Oppor...     article     11  2017  \n",
       "6   Current development of targeted oligonucleotid...     article     45  2016  \n",
       "7   Therapeutic siRNA for drug-resistant HER2-posi...     article      7  2016  \n",
       "8   Erratum to “Dermal delivery of HSP47 siRNA wit...     article     74  2016  \n",
       "9   Dermal delivery of HSP47 siRNA with NOX4-modul...     article     66  2015  \n",
       "10  Cationic Polymer Modified Mesoporous Silica Na...     article     25  2015  \n",
       "11  Cancer Nanomedicine: Cationic Polymer Modified...     article     25  2015  \n",
       "12  Correction\\nto Novel Oral Detoxification of Me...     article      6  2014  \n",
       "13  Novel oral detoxification of mercury, cadmium,...     article      6  2014  \n",
       "14  Nanoporous sorbent material as an oral phospha...     article      5  2014  \n",
       "15  Abstract LB-258: Developing therapeutic siRNA ...  proceeding    NaN  2012  "
      ]
     },
     "execution_count": 11,
     "metadata": {
      "tags": []
     },
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%%dsl_query_as_df \n",
    "search publications where researchers.orcid_id = \"0000-0003-4187-7709\" return publications"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "PMsaqYLuywj_"
   },
   "source": [
    "---\n",
    "## DSL-233 Show corresponding author info (when available)\n",
    "https://uberresearch.atlassian.net/browse/DSL-233"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "e1jmK85OywkA"
   },
   "source": [
    "NoTE: this works only with SPringer Nature content "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "d0Vjw8BWywkA",
    "outputId": "786e6bf1-5c66-4d84-ad3f-ffc28c73605c"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Publications: 1 (total = 1)\n"
     ]
    },
    {
     "data": {
      "application/json": {
       "_stats": {
        "total_count": 1
       },
       "publications": [
        {
         "author_affiliations": [
          [
           {
            "affiliations": [
             {
              "city": "Detroit",
              "city_id": 4990729,
              "country": "United States",
              "country_code": "US",
              "id": "grid.254444.7",
              "name": "Wayne State University",
              "state": "Michigan",
              "state_code": "US-MI"
             }
            ],
            "corresponding": "",
            "current_organization_id": "grid.254444.7",
            "first_name": "Xuefeng",
            "last_name": "Ren",
            "orcid": "",
            "raw_affiliation": [
             "Department of Biochemistry and Molecular Biology, School of Medicine, Wayne State University, 48201, Detroit, MI, USA"
            ],
            "researcher_id": "ur.016530545307.66"
           },
           {
            "affiliations": [
             {
              "city": "Detroit",
              "city_id": 4990729,
              "country": "United States",
              "country_code": "US",
              "id": "grid.254444.7",
              "name": "Wayne State University",
              "state": "Michigan",
              "state_code": "US-MI"
             }
            ],
            "corresponding": "",
            "current_organization_id": "grid.254444.7",
            "first_name": "Yunhuang",
            "last_name": "Yang",
            "orcid": "",
            "raw_affiliation": [
             "Department of Biochemistry and Molecular Biology, School of Medicine, Wayne State University, 48201, Detroit, MI, USA"
            ],
            "researcher_id": "ur.0735543207.93"
           },
           {
            "affiliations": [
             {
              "city": "Ottawa",
              "city_id": 6094817,
              "country": "Canada",
              "country_code": "CA",
              "id": "grid.28046.38",
              "name": "University of Ottawa",
              "state": "Ontario",
              "state_code": "CA-ON"
             }
            ],
            "corresponding": "",
            "current_organization_id": "grid.28046.38",
            "first_name": "Tracey",
            "last_name": "Neville",
            "orcid": "",
            "raw_affiliation": [
             "Heart Institute, University of Ottawa, K1Y 4W7, Ottawa, ON, Canada"
            ],
            "researcher_id": "ur.01246511556.51"
           },
           {
            "affiliations": [
             {
              "city": "Richland",
              "city_id": 5808276,
              "country": "United States",
              "country_code": "US",
              "id": "grid.451303.0",
              "name": "Pacific Northwest National Laboratory",
              "state": "Washington",
              "state_code": "US-WA"
             }
            ],
            "corresponding": "",
            "current_organization_id": "grid.451303.0",
            "first_name": "David",
            "last_name": "Hoyt",
            "orcid": "['0000-0002-2857-719X']",
            "raw_affiliation": [
             "High Field Magnetic Resonance Facility, EMSL, Pacific Northwest National Laboratory, 99352, Richland, WA, USA"
            ],
            "researcher_id": "ur.01157543076.27"
           },
           {
            "affiliations": [
             {
              "city": "Ottawa",
              "city_id": 6094817,
              "country": "Canada",
              "country_code": "CA",
              "id": "grid.28046.38",
              "name": "University of Ottawa",
              "state": "Ontario",
              "state_code": "CA-ON"
             }
            ],
            "corresponding": "",
            "current_organization_id": "grid.28046.38",
            "first_name": "Daniel",
            "last_name": "Sparks",
            "orcid": "",
            "raw_affiliation": [
             "Heart Institute, University of Ottawa, K1Y 4W7, Ottawa, ON, Canada"
            ],
            "researcher_id": "ur.0733350566.55"
           },
           {
            "affiliations": [
             {
              "city": "Detroit",
              "city_id": 4990729,
              "country": "United States",
              "country_code": "US",
              "id": "grid.254444.7",
              "name": "Wayne State University",
              "state": "Michigan",
              "state_code": "US-MI"
             }
            ],
            "corresponding": true,
            "current_organization_id": "grid.254444.7",
            "first_name": "Jianjun",
            "last_name": "Wang",
            "orcid": "",
            "raw_affiliation": [
             "Department of Biochemistry and Molecular Biology, School of Medicine, Wayne State University, 48201, Detroit, MI, USA"
            ],
            "researcher_id": "ur.0621314607.39"
           }
          ]
         ],
         "id": "pub.1009702775",
         "issue": "1",
         "journal": {
          "id": "jour.1039950",
          "title": "Biomolecular NMR Assignments"
         },
         "pages": "69-71",
         "title": "A complete backbone spectral assignment of human apolipoprotein AI on a 38 kDa preβHDL (Lp1-AI) particle",
         "type": "article",
         "volume": "1",
         "year": 2007
        }
       ]
      },
      "text/plain": [
       "<dimcli.Result object #4706940752. Dict keys: '_stats', 'publications'>"
      ]
     },
     "execution_count": 14,
     "metadata": {
      "application/json": {
       "expanded": false,
       "root": "root"
      },
      "tags": []
     },
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%dsl_query search publications where doi=\"10.1007/s12104-007-9020-5\" return publications"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "g9vni3x6ywkC"
   },
   "outputs": [],
   "source": [
    "res = dsl_last_results"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "iU4jAtHCywkE",
    "outputId": "dc2e31a5-ad48-4661-f9da-815705874c5e"
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>affiliations</th>\n",
       "      <th>corresponding</th>\n",
       "      <th>current_organization_id</th>\n",
       "      <th>first_name</th>\n",
       "      <th>last_name</th>\n",
       "      <th>orcid</th>\n",
       "      <th>raw_affiliation</th>\n",
       "      <th>researcher_id</th>\n",
       "      <th>pub_id</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>[{'id': 'grid.254444.7', 'name': 'Wayne State ...</td>\n",
       "      <td></td>\n",
       "      <td>grid.254444.7</td>\n",
       "      <td>Xuefeng</td>\n",
       "      <td>Ren</td>\n",
       "      <td></td>\n",
       "      <td>[Department of Biochemistry and Molecular Biol...</td>\n",
       "      <td>ur.016530545307.66</td>\n",
       "      <td>pub.1009702775</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>[{'id': 'grid.254444.7', 'name': 'Wayne State ...</td>\n",
       "      <td></td>\n",
       "      <td>grid.254444.7</td>\n",
       "      <td>Yunhuang</td>\n",
       "      <td>Yang</td>\n",
       "      <td></td>\n",
       "      <td>[Department of Biochemistry and Molecular Biol...</td>\n",
       "      <td>ur.0735543207.93</td>\n",
       "      <td>pub.1009702775</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>[{'id': 'grid.28046.38', 'name': 'University o...</td>\n",
       "      <td></td>\n",
       "      <td>grid.28046.38</td>\n",
       "      <td>Tracey</td>\n",
       "      <td>Neville</td>\n",
       "      <td></td>\n",
       "      <td>[Heart Institute, University of Ottawa, K1Y 4W...</td>\n",
       "      <td>ur.01246511556.51</td>\n",
       "      <td>pub.1009702775</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>[{'id': 'grid.451303.0', 'name': 'Pacific Nort...</td>\n",
       "      <td></td>\n",
       "      <td>grid.451303.0</td>\n",
       "      <td>David</td>\n",
       "      <td>Hoyt</td>\n",
       "      <td>['0000-0002-2857-719X']</td>\n",
       "      <td>[High Field Magnetic Resonance Facility, EMSL,...</td>\n",
       "      <td>ur.01157543076.27</td>\n",
       "      <td>pub.1009702775</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>[{'id': 'grid.28046.38', 'name': 'University o...</td>\n",
       "      <td></td>\n",
       "      <td>grid.28046.38</td>\n",
       "      <td>Daniel</td>\n",
       "      <td>Sparks</td>\n",
       "      <td></td>\n",
       "      <td>[Heart Institute, University of Ottawa, K1Y 4W...</td>\n",
       "      <td>ur.0733350566.55</td>\n",
       "      <td>pub.1009702775</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>[{'id': 'grid.254444.7', 'name': 'Wayne State ...</td>\n",
       "      <td>True</td>\n",
       "      <td>grid.254444.7</td>\n",
       "      <td>Jianjun</td>\n",
       "      <td>Wang</td>\n",
       "      <td></td>\n",
       "      <td>[Department of Biochemistry and Molecular Biol...</td>\n",
       "      <td>ur.0621314607.39</td>\n",
       "      <td>pub.1009702775</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                        affiliations corresponding  \\\n",
       "0  [{'id': 'grid.254444.7', 'name': 'Wayne State ...                 \n",
       "1  [{'id': 'grid.254444.7', 'name': 'Wayne State ...                 \n",
       "2  [{'id': 'grid.28046.38', 'name': 'University o...                 \n",
       "3  [{'id': 'grid.451303.0', 'name': 'Pacific Nort...                 \n",
       "4  [{'id': 'grid.28046.38', 'name': 'University o...                 \n",
       "5  [{'id': 'grid.254444.7', 'name': 'Wayne State ...          True   \n",
       "\n",
       "  current_organization_id first_name last_name                    orcid  \\\n",
       "0           grid.254444.7    Xuefeng       Ren                            \n",
       "1           grid.254444.7   Yunhuang      Yang                            \n",
       "2           grid.28046.38     Tracey   Neville                            \n",
       "3           grid.451303.0      David      Hoyt  ['0000-0002-2857-719X']   \n",
       "4           grid.28046.38     Daniel    Sparks                            \n",
       "5           grid.254444.7    Jianjun      Wang                            \n",
       "\n",
       "                                     raw_affiliation       researcher_id  \\\n",
       "0  [Department of Biochemistry and Molecular Biol...  ur.016530545307.66   \n",
       "1  [Department of Biochemistry and Molecular Biol...    ur.0735543207.93   \n",
       "2  [Heart Institute, University of Ottawa, K1Y 4W...   ur.01246511556.51   \n",
       "3  [High Field Magnetic Resonance Facility, EMSL,...   ur.01157543076.27   \n",
       "4  [Heart Institute, University of Ottawa, K1Y 4W...    ur.0733350566.55   \n",
       "5  [Department of Biochemistry and Molecular Biol...    ur.0621314607.39   \n",
       "\n",
       "           pub_id  \n",
       "0  pub.1009702775  \n",
       "1  pub.1009702775  \n",
       "2  pub.1009702775  \n",
       "3  pub.1009702775  \n",
       "4  pub.1009702775  \n",
       "5  pub.1009702775  "
      ]
     },
     "execution_count": 16,
     "metadata": {
      "tags": []
     },
     "output_type": "execute_result"
    }
   ],
   "source": [
    "res.as_dataframe_authors()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "6eWtXlS_ywkG"
   },
   "outputs": [],
   "source": [
    "def get_corresponding_author(pub):\n",
    "    if pub.get(\"author_affiliations\"):\n",
    "        affs = pub.get(\"author_affiliations\")[0]\n",
    "#         print(affs)\n",
    "        for aff in affs:\n",
    "            if aff['corresponding'] == True:\n",
    "                print(pub['id'], \"Found a corresponding author: \",  aff['first_name'], aff['last_name'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "p9emNMqsywkH",
    "outputId": "22230e10-1260-4edf-a400-55480ea087f6"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Returned Publications: 200 (total = 563081)\n"
     ]
    }
   ],
   "source": [
    "snpubs = dslquery(\"\"\"search publications where publisher=\"Springer Nature\" and year=\"2018\" return publications limit 200\"\"\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {
    "Collapsed": "false",
    "colab_type": "text",
    "id": "4Cj-KDk-ywkJ"
   },
   "source": [
    "Eg compare first result with https://app.dimensions.ai/details/publication/pub.1105132142"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "6jtokdYIywkJ",
    "outputId": "220ffe52-d161-436a-9ead-cdf40a7318d3"
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "pub.1105132142 Found a corresponding author:  Yue Li\n",
      "pub.1110822547 Found a corresponding author:  Guangyu Wang\n",
      "pub.1105106543 Found a corresponding author:  Dehui Zeng\n",
      "pub.1105701652 Found a corresponding author:  Qijing Liu\n",
      "pub.1104890455 Found a corresponding author:  Juan J. Almaraz-Suarez\n",
      "pub.1107437347 Found a corresponding author:  S. R. Setayesh\n",
      "pub.1106470062 Found a corresponding author:  A. Oujifard\n",
      "pub.1108019876 Found a corresponding author:  S. Zhong\n",
      "pub.1107362574 Found a corresponding author:  Gita Taasoobshirazi\n",
      "pub.1105681431 Found a corresponding author:  J. O. Azeez\n",
      "pub.1105340471 Found a corresponding author:  Judith Brinkschulte\n",
      "pub.1106967523 Found a corresponding author:  A. u. Haq\n",
      "pub.1107767921 Found a corresponding author:  Ioannis Papadopoulos\n",
      "pub.1107340187 Found a corresponding author:  N. Heidarzadeh\n",
      "pub.1109808182 Found a corresponding author:  A. Anwar\n",
      "pub.1106909505 Found a corresponding author:  S. Gaind\n",
      "pub.1110032525 Found a corresponding author:  David Barker\n",
      "pub.1105901128 Found a corresponding author:  Minghai Zhang\n",
      "pub.1107849377 Found a corresponding author:  David Mehlhausen-Hassoen\n",
      "pub.1107318091 Found a corresponding author:  Ken Rigby\n",
      "pub.1110507260 Found a corresponding author:  S. Kamala-Kannan\n",
      "pub.1107125532 Found a corresponding author:  Kyung Eun Jahng\n",
      "pub.1110337589 Found a corresponding author:  M. Tsuji\n",
      "pub.1107912230 Found a corresponding author:  Joachim Hilgert\n",
      "pub.1105774430 Found a corresponding author:  Jiang Cheng\n",
      "pub.1106098072 Found a corresponding author:  S. M. Khezri\n",
      "pub.1104249925 Found a corresponding author:  Aiguo Duan\n",
      "pub.1107912322 Found a corresponding author:  Yun-Ping Ge\n",
      "pub.1110176984 Found a corresponding author:  C.-L. Chang\n",
      "pub.1107767922 Found a corresponding author:  Jingoo Kang\n",
      "pub.1107880926 Found a corresponding author:  Z. Barhoumi\n",
      "pub.1105909056 Found a corresponding author:  P. Chinnaiyan\n",
      "pub.1107880923 Found a corresponding author:  R. F. Abbas\n",
      "pub.1106131967 Found a corresponding author:  S. Rangabhashiyam\n",
      "pub.1107253518 Found a corresponding author:  S. M. Mousavi\n",
      "pub.1107253991 Found a corresponding author:  Y. Pakade\n",
      "pub.1109922608 Found a corresponding author:  Ilir Nase\n",
      "pub.1110344981 Found a corresponding author:  A. I. Piotrowicz-Cieślak\n",
      "pub.1107362532 Found a corresponding author:  Anja Panse\n",
      "pub.1105927657 Found a corresponding author:  K. N. Yogalakshmi\n",
      "pub.1106225083 Found a corresponding author:  M. Ghaderpoori\n",
      "pub.1107186961 Found a corresponding author:  A. Iqbal\n",
      "pub.1105271463 Found a corresponding author:  Yi Zhang\n",
      "pub.1105271463 Found a corresponding author:  Xiao-Hua Huang\n",
      "pub.1105084779 Found a corresponding author:  Xiangqing Ma\n",
      "pub.1106335179 Found a corresponding author:  Tahsin Mehdi\n",
      "pub.1106410973 Found a corresponding author:  Javier Pérez-Padilla\n",
      "pub.1110333205 Found a corresponding author:  Yannick Sire\n",
      "pub.1110580570 Found a corresponding author:  Xinjie Chen\n",
      "pub.1105642939 Found a corresponding author:  Mohsen Javanmiri Pour\n",
      "pub.1107037230 Found a corresponding author:  Irán Barrera\n",
      "pub.1110271473 Found a corresponding author:  Ying Liu\n",
      "pub.1107514238 Found a corresponding author:  Richard Stanton\n",
      "pub.1106906194 Found a corresponding author:  Chengzhen Wu\n",
      "pub.1104378791 Found a corresponding author:  Jie Liu\n",
      "pub.1105331807 Found a corresponding author:  Hassan Muhamed\n",
      "pub.1107437457 Found a corresponding author:  Angela B. Harris\n",
      "pub.1104891372 Found a corresponding author:  Hui Xu\n",
      "pub.1106225031 Found a corresponding author:  Jianghong Liu\n",
      "pub.1106225031 Found a corresponding author:  Patrick W. L. Leung\n",
      "pub.1104303620 Found a corresponding author:  Asmamaw Alemu\n",
      "pub.1106984493 Found a corresponding author:  Giacomo Mancini\n",
      "pub.1106542740 Found a corresponding author:  Sri Bala kameswari Kanchinadham\n",
      "pub.1105975030 Found a corresponding author:  M. Russel\n",
      "pub.1106911404 Found a corresponding author:  M. Amidpour\n",
      "pub.1110203332 Found a corresponding author:  Jia Xie\n",
      "pub.1110203659 Found a corresponding author:  P. Chaiprasert\n",
      "pub.1105910974 Found a corresponding author:  M. Abbasi\n",
      "pub.1107184981 Found a corresponding author:  A. F. Hassan\n",
      "pub.1110715930 Found a corresponding author:  H. Y. Aboul-Enein\n",
      "pub.1105433423 Found a corresponding author:  Charles Antwi-Boasiako\n",
      "pub.1107497507 Found a corresponding author:  Dexia Kong\n",
      "pub.1107768256 Found a corresponding author:  H. A. Öktem\n",
      "pub.1106061275 Found a corresponding author:  S. M. Shariat\n",
      "pub.1107600611 Found a corresponding author:  R. H. de Oliveira\n",
      "pub.1110176987 Found a corresponding author:  A. Figoli\n",
      "pub.1106366411 Found a corresponding author:  S. Banerjee\n",
      "pub.1107184733 Found a corresponding author:  K. S. Ahmad\n",
      "pub.1107663409 Found a corresponding author:  James D. Shilling\n",
      "pub.1106043480 Found a corresponding author:  Feng Mi\n",
      "pub.1104597765 Found a corresponding author:  Thomas Bauer\n",
      "pub.1107372692 Found a corresponding author:  A. Aryafar\n",
      "pub.1107372691 Found a corresponding author:  M. R. Almasian\n",
      "pub.1110487146 Found a corresponding author:  K. Szarlowicz\n",
      "pub.1109811298 Found a corresponding author:  T. C. Venkateswarulu\n",
      "pub.1107767923 Found a corresponding author:  Muhammet Arican\n",
      "pub.1106131968 Found a corresponding author:  H. M. Jena\n",
      "pub.1105681433 Found a corresponding author:  Singh Nisha\n",
      "pub.1107216156 Found a corresponding author:  B. Paul\n",
      "pub.1105927656 Found a corresponding author:  S. M. R. Miri Lavasani\n",
      "pub.1107105991 Found a corresponding author:  Jiangming Mo\n",
      "pub.1109895282 Found a corresponding author:  Joachim Hilgert\n",
      "pub.1105067979 Found a corresponding author:  Yeong Dae Park\n",
      "pub.1105608907 Found a corresponding author:  Yuhong Zhao\n",
      "pub.1109891270 Found a corresponding author:  Norisuke Ioku\n",
      "pub.1110580339 Found a corresponding author:   American Association of Petroleum Geologists, Energy Minerals Division\n",
      "pub.1106016159 Found a corresponding author:  K. Srinivasamoorthy\n",
      "pub.1106329116 Found a corresponding author:  Allen Leung\n",
      "pub.1106225030 Found a corresponding author:  Mimi Tatlow-Golden\n",
      "pub.1106255716 Found a corresponding author:  S. Shojaei\n",
      "pub.1110421943 Found a corresponding author:  Steven Devaney\n",
      "pub.1107400001 Found a corresponding author:  H. Zhou\n",
      "pub.1106131965 Found a corresponding author:  A. Shojaie\n",
      "pub.1106292544 Found a corresponding author:  Suzanne Dolwick Grieb\n",
      "pub.1104263871 Found a corresponding author:  Chenghao Li\n",
      "pub.1110535469 Found a corresponding author:  Serena Dipierro\n",
      "pub.1107535149 Found a corresponding author:  M. Najafzadeh\n",
      "pub.1107491204 Found a corresponding author:  M. Mohammadi\n",
      "pub.1108037149 Found a corresponding author:  Klaus Volkert\n",
      "pub.1106339646 Found a corresponding author:  R. Mohammadzadeh Kakhki\n",
      "pub.1105681432 Found a corresponding author:  Guibin Wang\n",
      "pub.1110344979 Found a corresponding author:  S. M. Mohy El-Din\n",
      "pub.1106044375 Found a corresponding author:  A. Huckleberry\n",
      "pub.1107263031 Found a corresponding author:  Ahmad Hosseini\n",
      "pub.1104329321 Found a corresponding author:  Xinwu Li\n",
      "pub.1105440803 Found a corresponding author:  Weimin Xi\n",
      "pub.1105977001 Found a corresponding author:  Edwin van Teijlingen\n",
      "pub.1104989975 Found a corresponding author:  Rattana Choowang\n",
      "pub.1110176955 Found a corresponding author:  Alex Yue Feng Zhu\n",
      "pub.1107489487 Found a corresponding author:  M. Behbahani\n",
      "pub.1106118821 Found a corresponding author:  K. A. Ali\n",
      "pub.1106150153 Found a corresponding author:  Skander M’zah\n",
      "pub.1106225081 Found a corresponding author:  V. C. Srivastava\n",
      "pub.1106097785 Found a corresponding author:  Jeannette M. Beasley\n",
      "pub.1107362573 Found a corresponding author:  Hye-Eun Chu\n",
      "pub.1107372315 Found a corresponding author:  Margery Gardner\n",
      "pub.1110105523 Found a corresponding author:  D. Smołka-Danielowska\n",
      "pub.1104124076 Found a corresponding author:  Diego Resende Rodrigues\n",
      "pub.1107712992 Found a corresponding author:  S. M. A. Radwan\n",
      "pub.1105975523 Found a corresponding author:  Q. M. R. Haq\n",
      "pub.1107187014 Found a corresponding author:  E. Bakhtavar\n",
      "pub.1106340465 Found a corresponding author:  P. K. Ghosh\n",
      "pub.1107186293 Found a corresponding author:  A. R. Ghosh\n",
      "pub.1105805725 Found a corresponding author:  Jéssica de Cássia Tomasi\n",
      "pub.1106542682 Found a corresponding author:  Suman Khadka\n",
      "pub.1110333428 Found a corresponding author:  A. Olejnik\n",
      "pub.1110507140 Found a corresponding author:  Evgenios Agathokleous\n",
      "pub.1105226462 Found a corresponding author:  Ning Ye\n",
      "pub.1107646161 Found a corresponding author:  L. R. R. Souza\n",
      "pub.1107218275 Found a corresponding author:  R. Kumari\n",
      "pub.1107362572 Found a corresponding author:  Shai Olsher\n",
      "pub.1107849378 Found a corresponding author:  Claudia Schmiedeberg\n",
      "pub.1106818903 Found a corresponding author:  I. Kumar\n",
      "pub.1110536049 Found a corresponding author:  Y. C. Wang\n",
      "pub.1101330927 Found a corresponding author:  Richard Bubel\n",
      "pub.1106819219 Found a corresponding author:  Timo Kosiol\n",
      "pub.1104514704 Found a corresponding author:  Martin Becker\n",
      "pub.1107888782 Found a corresponding author:  G. Li\n",
      "pub.1105609025 Found a corresponding author:  S. Zeinali\n",
      "pub.1106225032 Found a corresponding author:  Zong-Kui Zhou\n",
      "pub.1105306651 Found a corresponding author:  Patrícia Mieth\n",
      "pub.1106120335 Found a corresponding author:  Gabriela Orsak\n",
      "pub.1107849356 Found a corresponding author:  Jonathan R. Potts\n",
      "pub.1107924559 Found a corresponding author:  Diana L. Townsend\n",
      "pub.1110762650 Found a corresponding author:  Suzanna Long\n",
      "pub.1105439607 Found a corresponding author:  C. Schröter\n",
      "pub.1109923979 Found a corresponding author:  João M. P. De Mello\n",
      "pub.1106338219 Found a corresponding author:  Volkan Topalli\n",
      "pub.1107125721 Found a corresponding author:  Ihsen Abid\n",
      "pub.1107090312 Found a corresponding author:  Arash Mirifar\n",
      "pub.1110715644 Found a corresponding author:  Bernd Kawohl\n",
      "pub.1107645345 Found a corresponding author:  Nikolay Usov\n",
      "pub.1107082834 Found a corresponding author:  Naiqing Zhang\n",
      "pub.1107082834 Found a corresponding author:  Kening Sun\n",
      "pub.1109783846 Found a corresponding author:  Jennifer E. Samson\n",
      "pub.1101330987 Found a corresponding author:  Harilaos N. Psaraftis\n",
      "pub.1104909819 Found a corresponding author:  Marcelin W. Diagne\n",
      "pub.1109759624 Found a corresponding author:  Sarah E. O. Schwartz\n",
      "pub.1106340265 Found a corresponding author:  Yadong Wang\n",
      "pub.1109891761 Found a corresponding author:  Alberto Abbondandolo\n",
      "pub.1107967434 Found a corresponding author:  Greg Ridgeway\n",
      "pub.1105602405 Found a corresponding author:  Haizheng Dang\n",
      "pub.1100482410 Found a corresponding author:  Brookes Brown\n",
      "pub.1110065925 Found a corresponding author:  Gijs W. E. Santen\n",
      "pub.1110718361 Found a corresponding author:  Hironobu Sato\n",
      "pub.1110535947 Found a corresponding author:  H. A. Ohms\n",
      "pub.1101551571 Found a corresponding author:  Saqib Alam\n",
      "pub.1105086601 Found a corresponding author:  Peter Schütz\n",
      "pub.1107273488 Found a corresponding author:  Chris T. Bauch\n",
      "pub.1110370723 Found a corresponding author:  Monika Neuhäuser-Berthold\n",
      "pub.1107912261 Found a corresponding author:  M. Preusch\n",
      "pub.1107395858 Found a corresponding author:  Eyal Rosenstreich\n",
      "pub.1103179699 Found a corresponding author:  Muhammad Shujahat\n",
      "pub.1107086715 Found a corresponding author:  Amy Lawson Moore\n",
      "pub.1107297000 Found a corresponding author:  Brian C. Kavanaugh\n",
      "pub.1106274513 Found a corresponding author:  Poulomi Roy\n",
      "pub.1110260835 Found a corresponding author:  Tatjana Thiel\n",
      "pub.1107345752 Found a corresponding author:  Anne Schmidt\n",
      "pub.1109780042 Found a corresponding author:  Roderick W. Jones\n",
      "pub.1110401483 Found a corresponding author:  Fengwu Bai\n",
      "pub.1107768376 Found a corresponding author:  Mariana Szklo-Coxe\n",
      "pub.1100712948 Found a corresponding author:  Nirosha Hewa Wellalage\n",
      "pub.1110449863 Found a corresponding author:  Roman Matkovskyy\n",
      "pub.1107411003 Found a corresponding author:  Andrey V. Semushin\n",
      "pub.1100560358 Found a corresponding author:  Kenneth Silver\n",
      "pub.1107796885 Found a corresponding author:  Neelam Gohar\n",
      "pub.1107055166 Found a corresponding author:  Gustavo Souto dos Santos Diz\n",
      "pub.1107432317 Found a corresponding author:  Ioannis Skevas\n",
      "pub.1107362670 Found a corresponding author:  Katherine Meyer\n",
      "pub.1105877583 Found a corresponding author:  Raka Jovanovic\n",
      "pub.1107088128 Found a corresponding author:  S. Casu\n",
      "pub.1110397834 Found a corresponding author:  Aviral Kumar Tiwari\n",
      "pub.1110256078 Found a corresponding author:  Feifei Bu\n"
     ]
    }
   ],
   "source": [
    "for p in snpubs.publications:\n",
    "    get_corresponding_author(p)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "Collapsed": "false",
    "colab": {},
    "colab_type": "code",
    "id": "xus0RN9VywkL"
   },
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "colab": {
   "include_colab_link": true,
   "name": "v1.20-qa.ipynb",
   "provenance": [],
   "toc_visible": true
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
